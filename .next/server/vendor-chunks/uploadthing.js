"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/client/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/client/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UploadAbortedError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadAbortedError),\n/* harmony export */   UploadPausedError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadPausedError),\n/* harmony export */   allowedContentTextLabelGenerator: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.allowedContentTextLabelGenerator),\n/* harmony export */   bytesToFileSize: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.bytesToFileSize),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generatePermittedFileTypes),\n/* harmony export */   isValidFileSize: () => (/* binding */ isValidFileSize),\n/* harmony export */   isValidFileType: () => (/* binding */ isValidFileType),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Array */ \"(ssr)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _dist_internal_deferred_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dist/_internal/deferred.js */ \"(ssr)/./node_modules/uploadthing/dist/_internal/deferred.js\");\n/* harmony import */ var _dist_internal_upload_browser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dist/_internal/upload-browser.js */ \"(ssr)/./node_modules/uploadthing/dist/_internal/upload-browser.js\");\n/* harmony import */ var _dist_internal_ut_reporter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dist/_internal/ut-reporter.js */ \"(ssr)/./node_modules/uploadthing/dist/_internal/ut-reporter.js\");\n\n\n\n\n\n\n\n\nvar version$1 = \"7.7.2\";\n\nconst version = version$1;\n/**\n * Validate that a file is of a valid type given a route config\n * @public\n */ const isValidFileType = (file, routeConfig)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map((type)=>file.type.includes(type)), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.orElseSucceed(()=>false)));\n/**\n * Validate that a file is of a valid size given a route config\n * @public\n */ const isValidFileSize = (file, routeConfig)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.flatMap((type)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fileSizeToBytes)(routeConfig[type].maxFileSize)), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map((maxFileSize)=>file.size <= maxFileSize), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.orElseSucceed(()=>false)));\n/**\n * Generate a typed uploader for a given FileRouter\n * @public\n */ const genUploader = (initOpts)=>{\n    const routeRegistry = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.createIdentityProxy)();\n    const controllableUpload = async (slug, opts)=>{\n        const uploads = new Map();\n        const endpoint = typeof slug === \"function\" ? slug(routeRegistry) : slug;\n        const utReporter = (0,_dist_internal_ut_reporter_js__WEBPACK_IMPORTED_MODULE_2__.createUTReporter)({\n            endpoint: String(endpoint),\n            package: initOpts?.package ?? \"uploadthing/client\",\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(initOpts?.url),\n            headers: opts.headers\n        });\n        const fetchFn = initOpts?.fetch ?? window.fetch;\n        const presigneds = await effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runPromise(utReporter(\"upload\", {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            input: \"input\" in opts ? opts.input : null,\n            files: opts.files.map((f)=>({\n                    name: f.name,\n                    size: f.size,\n                    type: f.type,\n                    lastModified: f.lastModified\n                }))\n        }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, fetchFn)));\n        const totalSize = opts.files.reduce((acc, f)=>acc + f.size, 0);\n        let totalLoaded = 0;\n        const uploadEffect = (file, presigned)=>(0,_dist_internal_upload_browser_js__WEBPACK_IMPORTED_MODULE_3__.uploadFile)(file, presigned, {\n                onUploadProgress: (progressEvent)=>{\n                    totalLoaded += progressEvent.delta;\n                    opts.onUploadProgress?.({\n                        ...progressEvent,\n                        file,\n                        progress: Math.round(progressEvent.loaded / file.size * 100),\n                        totalLoaded,\n                        totalProgress: Math.round(totalLoaded / totalSize * 100)\n                    });\n                }\n            }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, fetchFn));\n        for (const [i, p] of presigneds.entries()){\n            const file = opts.files[i];\n            if (!file) continue;\n            const deferred = (0,_dist_internal_deferred_js__WEBPACK_IMPORTED_MODULE_4__.createDeferred)();\n            uploads.set(file, {\n                deferred,\n                presigned: p\n            });\n            void effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runPromiseExit(uploadEffect(file, p), {\n                signal: deferred.ac.signal\n            }).then((result)=>{\n                if (result._tag === \"Success\") {\n                    return deferred.resolve(result.value);\n                } else if (result.cause._tag === \"Interrupt\") {\n                    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadPausedError();\n                }\n                throw effect_Micro__WEBPACK_IMPORTED_MODULE_1__.causeSquash(result.cause);\n            }).catch((err)=>{\n                if (err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadPausedError) return;\n                deferred.reject(err);\n            });\n        }\n        /**\n     * Pause an ongoing upload\n     * @param file The file upload you want to pause. Can be omitted to pause all files\n     */ const pauseUpload = (file)=>{\n            const files = effect_Array__WEBPACK_IMPORTED_MODULE_5__.ensure(file ?? opts.files);\n            for (const file of files){\n                const upload = uploads.get(file);\n                if (!upload) return;\n                if (upload.deferred.ac.signal.aborted) {\n                    // Cancel the upload if it's already been paused\n                    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadAbortedError();\n                }\n                upload.deferred.ac.abort();\n            }\n        };\n        /**\n     * Resume a paused upload\n     * @param file The file upload you want to resume. Can be omitted to resume all files\n     */ const resumeUpload = (file)=>{\n            const files = effect_Array__WEBPACK_IMPORTED_MODULE_5__.ensure(file ?? opts.files);\n            for (const file of files){\n                const upload = uploads.get(file);\n                if (!upload) throw \"No upload found\";\n                upload.deferred.ac = new AbortController();\n                void effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runPromiseExit(uploadEffect(file, upload.presigned), {\n                    signal: upload.deferred.ac.signal\n                }).then((result)=>{\n                    if (result._tag === \"Success\") {\n                        return upload.deferred.resolve(result.value);\n                    } else if (result.cause._tag === \"Interrupt\") {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadPausedError();\n                    }\n                    throw effect_Micro__WEBPACK_IMPORTED_MODULE_1__.causeSquash(result.cause);\n                }).catch((err)=>{\n                    if (err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadPausedError) return;\n                    upload.deferred.reject(err);\n                });\n            }\n        };\n        /**\n     * Wait for an upload to complete\n     * @param file The file upload you want to wait for. Can be omitted to wait for all files\n     */ const done = async (file)=>{\n            const promises = [];\n            const files = effect_Array__WEBPACK_IMPORTED_MODULE_5__.ensure(file ?? opts.files);\n            for (const file of files){\n                const upload = uploads.get(file);\n                if (!upload) throw \"No upload found\";\n                promises.push(upload.deferred.promise);\n            }\n            const results = await Promise.all(promises);\n            return file ? results[0] : results;\n        };\n        return {\n            pauseUpload,\n            resumeUpload,\n            done\n        };\n    };\n    /**\n   * One step upload function that both requests presigned URLs\n   * and then uploads the files to UploadThing\n   */ const typedUploadFiles = (slug, opts)=>{\n        const endpoint = typeof slug === \"function\" ? slug(routeRegistry) : slug;\n        const fetchFn = initOpts?.fetch ?? window.fetch;\n        return (0,_dist_internal_upload_browser_js__WEBPACK_IMPORTED_MODULE_3__.uploadFilesInternal)(endpoint, {\n            ...opts,\n            skipPolling: {},\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(initOpts?.url),\n            package: initOpts?.package ?? \"uploadthing/client\",\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            input: opts.input\n        }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, fetchFn), (effect)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runPromiseExit(effect, opts.signal && {\n                signal: opts.signal\n            })).then((exit)=>{\n            if (exit._tag === \"Success\") {\n                return exit.value;\n            } else if (exit.cause._tag === \"Interrupt\") {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadAbortedError();\n            }\n            throw effect_Micro__WEBPACK_IMPORTED_MODULE_1__.causeSquash(exit.cause);\n        });\n    };\n    return {\n        uploadFiles: typedUploadFiles,\n        createUpload: controllableUpload,\n        /**\n     * Identity object that can be used instead of raw strings\n     * that allows \"Go to definition\" in your IDE to bring you\n     * to the backend definition of a route.\n     */ routeRegistry\n    };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ0U7QUFDeUk7QUFDNkI7QUFDN0k7QUFDdUI7QUFDbEI7O0FBRXBFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlEQUFhLENBQUMsa0VBQWEsT0FBTywrREFBVSxvQkFBb0IsNkNBQVMsb0NBQW9DLHVEQUFtQjtBQUNqTDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsaURBQWEsQ0FBQyxrRUFBYSxPQUFPLCtEQUFVLG9CQUFvQixpREFBYSxTQUFTLG9FQUFlLGtDQUFrQyw2Q0FBUywyQ0FBMkMsdURBQW1CO0FBQy9QO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdFQUFtQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0VBQWdCO0FBQzNDO0FBQ0E7QUFDQSxpQkFBaUIsdUVBQWtCO0FBQ25DO0FBQ0EsU0FBUztBQUNUO0FBQ0EsaUNBQWlDLG9EQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixTQUFTLE9BQU8sd0RBQW9CLENBQUMsNkRBQVk7QUFDakQ7QUFDQTtBQUNBLGdEQUFnRCw0RUFBVTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYSxPQUFPLHdEQUFvQixDQUFDLDZEQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwRUFBYztBQUMzQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsaUJBQWlCLHdEQUFvQjtBQUNyQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLDhCQUE4QixrRUFBaUI7QUFDL0M7QUFDQSxzQkFBc0IscURBQWlCO0FBQ3ZDLGFBQWE7QUFDYixtQ0FBbUMsa0VBQWlCO0FBQ3BEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0RBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtRUFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnREFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix3REFBb0I7QUFDekM7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QixrQ0FBa0Msa0VBQWlCO0FBQ25EO0FBQ0EsMEJBQTBCLHFEQUFpQjtBQUMzQyxpQkFBaUI7QUFDakIsdUNBQXVDLGtFQUFpQjtBQUN4RDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnREFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxRkFBbUI7QUFDbEM7QUFDQSwyQkFBMkI7QUFDM0IsaUJBQWlCLHVFQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxTQUFTLE9BQU8sd0RBQW9CLENBQUMsNkRBQVksc0JBQXNCLHdEQUFvQjtBQUMzRjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsY0FBYztBQUNkLDBCQUEwQixtRUFBa0I7QUFDNUM7QUFDQSxrQkFBa0IscURBQWlCO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrRSIsInNvdXJjZXMiOlsiRDpcXHRlbXBcXFlvdVR1YmVcXG5vZGVfbW9kdWxlc1xcdXBsb2FkdGhpbmdcXGNsaWVudFxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXJyIGZyb20gJ2VmZmVjdC9BcnJheSc7XG5pbXBvcnQgKiBhcyBNaWNybyBmcm9tICdlZmZlY3QvTWljcm8nO1xuaW1wb3J0IHsgbWF0Y2hGaWxlVHlwZSwgb2JqZWN0S2V5cywgZmlsZVNpemVUb0J5dGVzLCBjcmVhdGVJZGVudGl0eVByb3h5LCByZXNvbHZlTWF5YmVVcmxBcmcsIEZldGNoQ29udGV4dCwgVXBsb2FkUGF1c2VkRXJyb3IsIFVwbG9hZEFib3J0ZWRFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuZXhwb3J0IHsgVXBsb2FkQWJvcnRlZEVycm9yLCBVcGxvYWRQYXVzZWRFcnJvciwgYWxsb3dlZENvbnRlbnRUZXh0TGFiZWxHZW5lcmF0b3IsIGJ5dGVzVG9GaWxlU2l6ZSwgZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCwgZ2VuZXJhdGVNaW1lVHlwZXMsIGdlbmVyYXRlUGVybWl0dGVkRmlsZVR5cGVzIH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2RlZmVycmVkLmpzJztcbmltcG9ydCB7IHVwbG9hZEZpbGUsIHVwbG9hZEZpbGVzSW50ZXJuYWwgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC91cGxvYWQtYnJvd3Nlci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVVVFJlcG9ydGVyIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvdXQtcmVwb3J0ZXIuanMnO1xuXG52YXIgdmVyc2lvbiQxID0gXCI3LjcuMlwiO1xuXG5jb25zdCB2ZXJzaW9uID0gdmVyc2lvbiQxO1xuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGEgZmlsZSBpcyBvZiBhIHZhbGlkIHR5cGUgZ2l2ZW4gYSByb3V0ZSBjb25maWdcbiAqIEBwdWJsaWNcbiAqLyBjb25zdCBpc1ZhbGlkRmlsZVR5cGUgPSAoZmlsZSwgcm91dGVDb25maWcpPT5NaWNyby5ydW5TeW5jKG1hdGNoRmlsZVR5cGUoZmlsZSwgb2JqZWN0S2V5cyhyb3V0ZUNvbmZpZykpLnBpcGUoTWljcm8ubWFwKCh0eXBlKT0+ZmlsZS50eXBlLmluY2x1ZGVzKHR5cGUpKSwgTWljcm8ub3JFbHNlU3VjY2VlZCgoKT0+ZmFsc2UpKSk7XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSBmaWxlIGlzIG9mIGEgdmFsaWQgc2l6ZSBnaXZlbiBhIHJvdXRlIGNvbmZpZ1xuICogQHB1YmxpY1xuICovIGNvbnN0IGlzVmFsaWRGaWxlU2l6ZSA9IChmaWxlLCByb3V0ZUNvbmZpZyk9Pk1pY3JvLnJ1blN5bmMobWF0Y2hGaWxlVHlwZShmaWxlLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSkucGlwZShNaWNyby5mbGF0TWFwKCh0eXBlKT0+ZmlsZVNpemVUb0J5dGVzKHJvdXRlQ29uZmlnW3R5cGVdLm1heEZpbGVTaXplKSksIE1pY3JvLm1hcCgobWF4RmlsZVNpemUpPT5maWxlLnNpemUgPD0gbWF4RmlsZVNpemUpLCBNaWNyby5vckVsc2VTdWNjZWVkKCgpPT5mYWxzZSkpKTtcbi8qKlxuICogR2VuZXJhdGUgYSB0eXBlZCB1cGxvYWRlciBmb3IgYSBnaXZlbiBGaWxlUm91dGVyXG4gKiBAcHVibGljXG4gKi8gY29uc3QgZ2VuVXBsb2FkZXIgPSAoaW5pdE9wdHMpPT57XG4gICAgY29uc3Qgcm91dGVSZWdpc3RyeSA9IGNyZWF0ZUlkZW50aXR5UHJveHkoKTtcbiAgICBjb25zdCBjb250cm9sbGFibGVVcGxvYWQgPSBhc3luYyAoc2x1Zywgb3B0cyk9PntcbiAgICAgICAgY29uc3QgdXBsb2FkcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0eXBlb2Ygc2x1ZyA9PT0gXCJmdW5jdGlvblwiID8gc2x1Zyhyb3V0ZVJlZ2lzdHJ5KSA6IHNsdWc7XG4gICAgICAgIGNvbnN0IHV0UmVwb3J0ZXIgPSBjcmVhdGVVVFJlcG9ydGVyKHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuICAgICAgICAgICAgcGFja2FnZTogaW5pdE9wdHM/LnBhY2thZ2UgPz8gXCJ1cGxvYWR0aGluZy9jbGllbnRcIixcbiAgICAgICAgICAgIHVybDogcmVzb2x2ZU1heWJlVXJsQXJnKGluaXRPcHRzPy51cmwpLFxuICAgICAgICAgICAgaGVhZGVyczogb3B0cy5oZWFkZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmZXRjaEZuID0gaW5pdE9wdHM/LmZldGNoID8/IHdpbmRvdy5mZXRjaDtcbiAgICAgICAgY29uc3QgcHJlc2lnbmVkcyA9IGF3YWl0IE1pY3JvLnJ1blByb21pc2UodXRSZXBvcnRlcihcInVwbG9hZFwiLCB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgICBpbnB1dDogXCJpbnB1dFwiIGluIG9wdHMgPyBvcHRzLmlucHV0IDogbnVsbCxcbiAgICAgICAgICAgIGZpbGVzOiBvcHRzLmZpbGVzLm1hcCgoZik9Pih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGYubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZi5zaXplLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBmLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZi5sYXN0TW9kaWZpZWRcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgfSkucGlwZShNaWNyby5wcm92aWRlU2VydmljZShGZXRjaENvbnRleHQsIGZldGNoRm4pKSk7XG4gICAgICAgIGNvbnN0IHRvdGFsU2l6ZSA9IG9wdHMuZmlsZXMucmVkdWNlKChhY2MsIGYpPT5hY2MgKyBmLnNpemUsIDApO1xuICAgICAgICBsZXQgdG90YWxMb2FkZWQgPSAwO1xuICAgICAgICBjb25zdCB1cGxvYWRFZmZlY3QgPSAoZmlsZSwgcHJlc2lnbmVkKT0+dXBsb2FkRmlsZShmaWxlLCBwcmVzaWduZWQsIHtcbiAgICAgICAgICAgICAgICBvblVwbG9hZFByb2dyZXNzOiAocHJvZ3Jlc3NFdmVudCk9PntcbiAgICAgICAgICAgICAgICAgICAgdG90YWxMb2FkZWQgKz0gcHJvZ3Jlc3NFdmVudC5kZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvZ3Jlc3NFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogTWF0aC5yb3VuZChwcm9ncmVzc0V2ZW50LmxvYWRlZCAvIGZpbGUuc2l6ZSAqIDEwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbExvYWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJvZ3Jlc3M6IE1hdGgucm91bmQodG90YWxMb2FkZWQgLyB0b3RhbFNpemUgKiAxMDApXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnBpcGUoTWljcm8ucHJvdmlkZVNlcnZpY2UoRmV0Y2hDb250ZXh0LCBmZXRjaEZuKSk7XG4gICAgICAgIGZvciAoY29uc3QgW2ksIHBdIG9mIHByZXNpZ25lZHMuZW50cmllcygpKXtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBvcHRzLmZpbGVzW2ldO1xuICAgICAgICAgICAgaWYgKCFmaWxlKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gY3JlYXRlRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHVwbG9hZHMuc2V0KGZpbGUsIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZCxcbiAgICAgICAgICAgICAgICBwcmVzaWduZWQ6IHBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBNaWNyby5ydW5Qcm9taXNlRXhpdCh1cGxvYWRFZmZlY3QoZmlsZSwgcCksIHtcbiAgICAgICAgICAgICAgICBzaWduYWw6IGRlZmVycmVkLmFjLnNpZ25hbFxuICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KT0+e1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuX3RhZyA9PT0gXCJTdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jYXVzZS5fdGFnID09PSBcIkludGVycnVwdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRQYXVzZWRFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBNaWNyby5jYXVzZVNxdWFzaChyZXN1bHQuY2F1c2UpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycik9PntcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVXBsb2FkUGF1c2VkRXJyb3IpIHJldHVybjtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAqIFBhdXNlIGFuIG9uZ29pbmcgdXBsb2FkXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdXBsb2FkIHlvdSB3YW50IHRvIHBhdXNlLiBDYW4gYmUgb21pdHRlZCB0byBwYXVzZSBhbGwgZmlsZXNcbiAgICAgKi8gY29uc3QgcGF1c2VVcGxvYWQgPSAoZmlsZSk9PntcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gQXJyLmVuc3VyZShmaWxlID8/IG9wdHMuZmlsZXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKXtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWQgPSB1cGxvYWRzLmdldChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVwbG9hZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICh1cGxvYWQuZGVmZXJyZWQuYWMuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuY2VsIHRoZSB1cGxvYWQgaWYgaXQncyBhbHJlYWR5IGJlZW4gcGF1c2VkXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRBYm9ydGVkRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBsb2FkLmRlZmVycmVkLmFjLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAqIFJlc3VtZSBhIHBhdXNlZCB1cGxvYWRcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB1cGxvYWQgeW91IHdhbnQgdG8gcmVzdW1lLiBDYW4gYmUgb21pdHRlZCB0byByZXN1bWUgYWxsIGZpbGVzXG4gICAgICovIGNvbnN0IHJlc3VtZVVwbG9hZCA9IChmaWxlKT0+e1xuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBBcnIuZW5zdXJlKGZpbGUgPz8gb3B0cy5maWxlcyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpe1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZCA9IHVwbG9hZHMuZ2V0KGZpbGUpO1xuICAgICAgICAgICAgICAgIGlmICghdXBsb2FkKSB0aHJvdyBcIk5vIHVwbG9hZCBmb3VuZFwiO1xuICAgICAgICAgICAgICAgIHVwbG9hZC5kZWZlcnJlZC5hYyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgICAgICB2b2lkIE1pY3JvLnJ1blByb21pc2VFeGl0KHVwbG9hZEVmZmVjdChmaWxlLCB1cGxvYWQucHJlc2lnbmVkKSwge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IHVwbG9hZC5kZWZlcnJlZC5hYy5zaWduYWxcbiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuX3RhZyA9PT0gXCJTdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGxvYWQuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jYXVzZS5fdGFnID09PSBcIkludGVycnVwdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkUGF1c2VkRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBNaWNyby5jYXVzZVNxdWFzaChyZXN1bHQuY2F1c2UpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBVcGxvYWRQYXVzZWRFcnJvcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWQuZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAqIFdhaXQgZm9yIGFuIHVwbG9hZCB0byBjb21wbGV0ZVxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHVwbG9hZCB5b3Ugd2FudCB0byB3YWl0IGZvci4gQ2FuIGJlIG9taXR0ZWQgdG8gd2FpdCBmb3IgYWxsIGZpbGVzXG4gICAgICovIGNvbnN0IGRvbmUgPSBhc3luYyAoZmlsZSk9PntcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IEFyci5lbnN1cmUoZmlsZSA/PyBvcHRzLmZpbGVzKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcyl7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkID0gdXBsb2Fkcy5nZXQoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGxvYWQpIHRocm93IFwiTm8gdXBsb2FkIGZvdW5kXCI7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh1cGxvYWQuZGVmZXJyZWQucHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGZpbGUgPyByZXN1bHRzWzBdIDogcmVzdWx0cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhdXNlVXBsb2FkLFxuICAgICAgICAgICAgcmVzdW1lVXBsb2FkLFxuICAgICAgICAgICAgZG9uZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAqIE9uZSBzdGVwIHVwbG9hZCBmdW5jdGlvbiB0aGF0IGJvdGggcmVxdWVzdHMgcHJlc2lnbmVkIFVSTHNcbiAgICogYW5kIHRoZW4gdXBsb2FkcyB0aGUgZmlsZXMgdG8gVXBsb2FkVGhpbmdcbiAgICovIGNvbnN0IHR5cGVkVXBsb2FkRmlsZXMgPSAoc2x1Zywgb3B0cyk9PntcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0eXBlb2Ygc2x1ZyA9PT0gXCJmdW5jdGlvblwiID8gc2x1Zyhyb3V0ZVJlZ2lzdHJ5KSA6IHNsdWc7XG4gICAgICAgIGNvbnN0IGZldGNoRm4gPSBpbml0T3B0cz8uZmV0Y2ggPz8gd2luZG93LmZldGNoO1xuICAgICAgICByZXR1cm4gdXBsb2FkRmlsZXNJbnRlcm5hbChlbmRwb2ludCwge1xuICAgICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICAgIHNraXBQb2xsaW5nOiB7fSxcbiAgICAgICAgICAgIHVybDogcmVzb2x2ZU1heWJlVXJsQXJnKGluaXRPcHRzPy51cmwpLFxuICAgICAgICAgICAgcGFja2FnZTogaW5pdE9wdHM/LnBhY2thZ2UgPz8gXCJ1cGxvYWR0aGluZy9jbGllbnRcIixcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgIGlucHV0OiBvcHRzLmlucHV0XG4gICAgICAgIH0pLnBpcGUoTWljcm8ucHJvdmlkZVNlcnZpY2UoRmV0Y2hDb250ZXh0LCBmZXRjaEZuKSwgKGVmZmVjdCk9Pk1pY3JvLnJ1blByb21pc2VFeGl0KGVmZmVjdCwgb3B0cy5zaWduYWwgJiYge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0cy5zaWduYWxcbiAgICAgICAgICAgIH0pKS50aGVuKChleGl0KT0+e1xuICAgICAgICAgICAgaWYgKGV4aXQuX3RhZyA9PT0gXCJTdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpdC52YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhpdC5jYXVzZS5fdGFnID09PSBcIkludGVycnVwdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZEFib3J0ZWRFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgTWljcm8uY2F1c2VTcXVhc2goZXhpdC5jYXVzZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBsb2FkRmlsZXM6IHR5cGVkVXBsb2FkRmlsZXMsXG4gICAgICAgIGNyZWF0ZVVwbG9hZDogY29udHJvbGxhYmxlVXBsb2FkLFxuICAgICAgICAvKipcbiAgICAgKiBJZGVudGl0eSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIHJhdyBzdHJpbmdzXG4gICAgICogdGhhdCBhbGxvd3MgXCJHbyB0byBkZWZpbml0aW9uXCIgaW4geW91ciBJREUgdG8gYnJpbmcgeW91XG4gICAgICogdG8gdGhlIGJhY2tlbmQgZGVmaW5pdGlvbiBvZiBhIHJvdXRlLlxuICAgICAqLyByb3V0ZVJlZ2lzdHJ5XG4gICAgfTtcbn07XG5cbmV4cG9ydCB7IGdlblVwbG9hZGVyLCBpc1ZhbGlkRmlsZVNpemUsIGlzVmFsaWRGaWxlVHlwZSwgdmVyc2lvbiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/client/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/_internal/deferred.js":
/*!*************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/deferred.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\nconst createDeferred = ()=>{\n    let resolve;\n    let reject;\n    const ac = new AbortController();\n    const promise = new Promise((res, rej)=>{\n        resolve = res;\n        reject = rej;\n    });\n    return {\n        promise,\n        ac,\n        resolve,\n        reject\n    };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZGVmZXJyZWQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUUwQiIsInNvdXJjZXMiOlsiRDpcXHRlbXBcXFlvdVR1YmVcXG5vZGVfbW9kdWxlc1xcdXBsb2FkdGhpbmdcXGRpc3RcXF9pbnRlcm5hbFxcZGVmZXJyZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY3JlYXRlRGVmZXJyZWQgPSAoKT0+e1xuICAgIGxldCByZXNvbHZlO1xuICAgIGxldCByZWplY3Q7XG4gICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaik9PntcbiAgICAgICAgcmVzb2x2ZSA9IHJlcztcbiAgICAgICAgcmVqZWN0ID0gcmVqO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2UsXG4gICAgICAgIGFjLFxuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3RcbiAgICB9O1xufTtcblxuZXhwb3J0IHsgY3JlYXRlRGVmZXJyZWQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/_internal/deferred.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/_internal/deprecations.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/deprecations.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\nconst logDeprecationWarning = (message)=>{\n    // eslint-disable-next-line no-console\n    console.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZGVwcmVjYXRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsaURBQWlELFFBQVE7QUFDekQ7O0FBRWlDIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxkZXByZWNhdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbG9nRGVwcmVjYXRpb25XYXJuaW5nID0gKG1lc3NhZ2UpPT57XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBbdXBsb2FkdGhpbmddW2RlcHJlY2F0ZWRdICR7bWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/_internal/deprecations.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/_internal/upload-browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-browser.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uploadFile: () => (/* binding */ uploadFile),\n/* harmony export */   uploadFilesInternal: () => (/* binding */ uploadFilesInternal)\n/* harmony export */ });\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Function */ \"(ssr)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Predicate */ \"(ssr)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./deprecations.js */ \"(ssr)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _ut_reporter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ut-reporter.js */ \"(ssr)/./node_modules/uploadthing/dist/_internal/ut-reporter.js\");\n\n\n\n\n\n\n\nvar version = \"7.7.2\";\n\nconst uploadWithProgress = (file, rangeStart, presigned, onUploadProgress)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.async((resume)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", presigned.url, true);\n        xhr.setRequestHeader(\"Range\", `bytes=${rangeStart}-`);\n        xhr.setRequestHeader(\"x-uploadthing-version\", version);\n        xhr.responseType = \"json\";\n        let previousLoaded = 0;\n        xhr.upload.addEventListener(\"progress\", ({ loaded })=>{\n            const delta = loaded - previousLoaded;\n            onUploadProgress?.({\n                loaded,\n                delta\n            });\n            previousLoaded = loaded;\n        });\n        xhr.addEventListener(\"load\", ()=>{\n            if (xhr.status >= 200 && xhr.status < 300 && (0,effect_Predicate__WEBPACK_IMPORTED_MODULE_1__.isRecord)(xhr.response)) {\n                if ((0,effect_Predicate__WEBPACK_IMPORTED_MODULE_1__.hasProperty)(xhr.response, \"error\")) {\n                    resume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                        code: \"UPLOAD_FAILED\",\n                        message: String(xhr.response.error),\n                        data: xhr.response\n                    }));\n                } else {\n                    resume(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.succeed(xhr.response));\n                }\n            } else {\n                resume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                    code: \"UPLOAD_FAILED\",\n                    message: `XHR failed ${xhr.status} ${xhr.statusText}`,\n                    data: xhr.response\n                }));\n            }\n        });\n        // Is there a case when the client would throw and\n        // ingest server not knowing about it? idts?\n        xhr.addEventListener(\"error\", ()=>{\n            resume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"UPLOAD_FAILED\"\n            }));\n        });\n        const formData = new FormData();\n        /**\n     * iOS/React Native FormData handling requires special attention:\n     *\n     * Issue: In React Native, iOS crashes with \"attempt to insert nil object\" when appending File directly\n     * to FormData. This happens because iOS tries to create NSDictionary from the file object and expects\n     * specific structure {uri, type, name}.\n     *\n     *\n     * Note: Don't try to use Blob or modify File object - iOS specifically needs plain object\n     * with these properties to create valid NSDictionary.\n     */ if (\"uri\" in file) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            formData.append(\"file\", {\n                uri: file.uri,\n                type: file.type,\n                name: file.name,\n                ...rangeStart > 0 && {\n                    range: rangeStart\n                }\n            });\n        } else {\n            formData.append(\"file\", rangeStart > 0 ? file.slice(rangeStart) : file);\n        }\n        xhr.send(formData);\n        return effect_Micro__WEBPACK_IMPORTED_MODULE_0__.sync(()=>xhr.abort());\n    });\nconst uploadFile = (file, presigned, opts)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.fetchEff)(presigned.url, {\n        method: \"HEAD\"\n    }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(({ headers })=>parseInt(headers.get(\"x-ut-range-start\") ?? \"0\", 10)), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.tap((start)=>opts.onUploadProgress?.({\n            delta: start,\n            loaded: start\n        })), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap((start)=>uploadWithProgress(file, start, presigned, (progressEvent)=>opts.onUploadProgress?.({\n                delta: progressEvent.delta,\n                loaded: progressEvent.loaded + start\n            }))), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(effect_Function__WEBPACK_IMPORTED_MODULE_3__.unsafeCoerce), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map((uploadResponse)=>({\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            lastModified: file.lastModified,\n            serverData: uploadResponse.serverData,\n            get url () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_4__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return uploadResponse.url;\n            },\n            get appUrl () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_4__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return uploadResponse.appUrl;\n            },\n            ufsUrl: uploadResponse.ufsUrl,\n            customId: presigned.customId,\n            type: file.type,\n            fileHash: uploadResponse.fileHash\n        })));\nconst uploadFilesInternal = (endpoint, opts)=>{\n    // classic service right here\n    const reportEventToUT = (0,_ut_reporter_js__WEBPACK_IMPORTED_MODULE_5__.createUTReporter)({\n        endpoint: String(endpoint),\n        package: opts.package,\n        url: opts.url,\n        headers: opts.headers\n    });\n    const totalSize = opts.files.reduce((acc, f)=>acc + f.size, 0);\n    let totalLoaded = 0;\n    return effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap(reportEventToUT(\"upload\", {\n        input: \"input\" in opts ? opts.input : null,\n        files: opts.files.map((f)=>({\n                name: f.name,\n                size: f.size,\n                type: f.type,\n                lastModified: f.lastModified\n            }))\n    }), (presigneds)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.forEach(presigneds, (presigned, i)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.sync(()=>opts.onUploadBegin?.({\n                    file: opts.files[i].name\n                })), ()=>uploadFile(opts.files[i], presigned, {\n                    onUploadProgress: (ev)=>{\n                        totalLoaded += ev.delta;\n                        opts.onUploadProgress?.({\n                            file: opts.files[i],\n                            progress: ev.loaded / opts.files[i].size * 100,\n                            loaded: ev.loaded,\n                            delta: ev.delta,\n                            totalLoaded,\n                            totalProgress: totalLoaded / totalSize\n                        });\n                    }\n                })), {\n            concurrency: 6\n        }));\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJyb3dzZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0M7QUFDVDtBQUNtQjtBQUNRO0FBQ1A7QUFDTjs7QUFFcEQ7O0FBRUEsNEVBQTRFLCtDQUFXO0FBQ3ZGO0FBQ0E7QUFDQSwrQ0FBK0MsV0FBVztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsUUFBUTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLHlEQUF5RCwwREFBUTtBQUNqRSxvQkFBb0IsNkRBQVc7QUFDL0IsK0JBQStCLGlFQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsa0JBQWtCO0FBQ2xCLDJCQUEyQixpREFBYTtBQUN4QztBQUNBLGNBQWM7QUFDZCwyQkFBMkIsaUVBQWdCO0FBQzNDO0FBQ0EsMkNBQTJDLFlBQVksRUFBRSxlQUFlO0FBQ3hFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpRUFBZ0I7QUFDdkM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnQkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOENBQVU7QUFDekIsS0FBSztBQUNMLDRDQUE0Qyw2REFBUTtBQUNwRDtBQUNBLEtBQUssT0FBTyw2Q0FBUyxJQUFJLFNBQVMsMERBQTBELDZDQUFTO0FBQ3JHO0FBQ0E7QUFDQSxTQUFTLElBQUksaURBQWE7QUFDMUI7QUFDQTtBQUNBLGFBQWEsS0FBSyw2Q0FBUyxDQUFDLHlEQUFZLEdBQUcsNkNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUFxQjtBQUNyQztBQUNBLGFBQWE7QUFDYjtBQUNBLGdCQUFnQix1RUFBcUI7QUFDckM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QixpRUFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFdBQVcsaURBQWE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEtBQUssaUJBQWlCLGlEQUFhLDZCQUE2QixpREFBYSxDQUFDLDhDQUFVO0FBQ3hGO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDs7QUFFMkMiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHVwbG9hZC1icm93c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuc2FmZUNvZXJjZSB9IGZyb20gJ2VmZmVjdC9GdW5jdGlvbic7XG5pbXBvcnQgKiBhcyBNaWNybyBmcm9tICdlZmZlY3QvTWljcm8nO1xuaW1wb3J0IHsgaXNSZWNvcmQsIGhhc1Byb3BlcnR5IH0gZnJvbSAnZWZmZWN0L1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyBmZXRjaEVmZiwgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH0gZnJvbSAnLi9kZXByZWNhdGlvbnMuanMnO1xuaW1wb3J0IHsgY3JlYXRlVVRSZXBvcnRlciB9IGZyb20gJy4vdXQtcmVwb3J0ZXIuanMnO1xuXG52YXIgdmVyc2lvbiA9IFwiNy43LjJcIjtcblxuY29uc3QgdXBsb2FkV2l0aFByb2dyZXNzID0gKGZpbGUsIHJhbmdlU3RhcnQsIHByZXNpZ25lZCwgb25VcGxvYWRQcm9ncmVzcyk9Pk1pY3JvLmFzeW5jKChyZXN1bWUpPT57XG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBVVFwiLCBwcmVzaWduZWQudXJsLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJSYW5nZVwiLCBgYnl0ZXM9JHtyYW5nZVN0YXJ0fS1gKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIiwgdmVyc2lvbik7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgICAgbGV0IHByZXZpb3VzTG9hZGVkID0gMDtcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKHsgbG9hZGVkIH0pPT57XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGxvYWRlZCAtIHByZXZpb3VzTG9hZGVkO1xuICAgICAgICAgICAgb25VcGxvYWRQcm9ncmVzcz8uKHtcbiAgICAgICAgICAgICAgICBsb2FkZWQsXG4gICAgICAgICAgICAgICAgZGVsdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJldmlvdXNMb2FkZWQgPSBsb2FkZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCk9PntcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwICYmIGlzUmVjb3JkKHhoci5yZXNwb25zZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcGVydHkoeGhyLnJlc3BvbnNlLCBcImVycm9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZShuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFN0cmluZyh4aHIucmVzcG9uc2UuZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeGhyLnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bWUoTWljcm8uc3VjY2VlZCh4aHIucmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VtZShuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgWEhSIGZhaWxlZCAke3hoci5zdGF0dXN9ICR7eGhyLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeGhyLnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gSXMgdGhlcmUgYSBjYXNlIHdoZW4gdGhlIGNsaWVudCB3b3VsZCB0aHJvdyBhbmRcbiAgICAgICAgLy8gaW5nZXN0IHNlcnZlciBub3Qga25vd2luZyBhYm91dCBpdD8gaWR0cz9cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKT0+e1xuICAgICAgICAgICAgcmVzdW1lKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgLyoqXG4gICAgICogaU9TL1JlYWN0IE5hdGl2ZSBGb3JtRGF0YSBoYW5kbGluZyByZXF1aXJlcyBzcGVjaWFsIGF0dGVudGlvbjpcbiAgICAgKlxuICAgICAqIElzc3VlOiBJbiBSZWFjdCBOYXRpdmUsIGlPUyBjcmFzaGVzIHdpdGggXCJhdHRlbXB0IHRvIGluc2VydCBuaWwgb2JqZWN0XCIgd2hlbiBhcHBlbmRpbmcgRmlsZSBkaXJlY3RseVxuICAgICAqIHRvIEZvcm1EYXRhLiBUaGlzIGhhcHBlbnMgYmVjYXVzZSBpT1MgdHJpZXMgdG8gY3JlYXRlIE5TRGljdGlvbmFyeSBmcm9tIHRoZSBmaWxlIG9iamVjdCBhbmQgZXhwZWN0c1xuICAgICAqIHNwZWNpZmljIHN0cnVjdHVyZSB7dXJpLCB0eXBlLCBuYW1lfS5cbiAgICAgKlxuICAgICAqXG4gICAgICogTm90ZTogRG9uJ3QgdHJ5IHRvIHVzZSBCbG9iIG9yIG1vZGlmeSBGaWxlIG9iamVjdCAtIGlPUyBzcGVjaWZpY2FsbHkgbmVlZHMgcGxhaW4gb2JqZWN0XG4gICAgICogd2l0aCB0aGVzZSBwcm9wZXJ0aWVzIHRvIGNyZWF0ZSB2YWxpZCBOU0RpY3Rpb25hcnkuXG4gICAgICovIGlmIChcInVyaVwiIGluIGZpbGUpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIHtcbiAgICAgICAgICAgICAgICB1cmk6IGZpbGUudXJpLFxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgLi4ucmFuZ2VTdGFydCA+IDAgJiYge1xuICAgICAgICAgICAgICAgICAgICByYW5nZTogcmFuZ2VTdGFydFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCByYW5nZVN0YXJ0ID4gMCA/IGZpbGUuc2xpY2UocmFuZ2VTdGFydCkgOiBmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgICAgIHJldHVybiBNaWNyby5zeW5jKCgpPT54aHIuYWJvcnQoKSk7XG4gICAgfSk7XG5jb25zdCB1cGxvYWRGaWxlID0gKGZpbGUsIHByZXNpZ25lZCwgb3B0cyk9PmZldGNoRWZmKHByZXNpZ25lZC51cmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIkhFQURcIlxuICAgIH0pLnBpcGUoTWljcm8ubWFwKCh7IGhlYWRlcnMgfSk9PnBhcnNlSW50KGhlYWRlcnMuZ2V0KFwieC11dC1yYW5nZS1zdGFydFwiKSA/PyBcIjBcIiwgMTApKSwgTWljcm8udGFwKChzdGFydCk9Pm9wdHMub25VcGxvYWRQcm9ncmVzcz8uKHtcbiAgICAgICAgICAgIGRlbHRhOiBzdGFydCxcbiAgICAgICAgICAgIGxvYWRlZDogc3RhcnRcbiAgICAgICAgfSkpLCBNaWNyby5mbGF0TWFwKChzdGFydCk9PnVwbG9hZFdpdGhQcm9ncmVzcyhmaWxlLCBzdGFydCwgcHJlc2lnbmVkLCAocHJvZ3Jlc3NFdmVudCk9Pm9wdHMub25VcGxvYWRQcm9ncmVzcz8uKHtcbiAgICAgICAgICAgICAgICBkZWx0YTogcHJvZ3Jlc3NFdmVudC5kZWx0YSxcbiAgICAgICAgICAgICAgICBsb2FkZWQ6IHByb2dyZXNzRXZlbnQubG9hZGVkICsgc3RhcnRcbiAgICAgICAgICAgIH0pKSksIE1pY3JvLm1hcCh1bnNhZmVDb2VyY2UpLCBNaWNyby5tYXAoKHVwbG9hZFJlc3BvbnNlKT0+KHtcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICAgICAgICBzZXJ2ZXJEYXRhOiB1cGxvYWRSZXNwb25zZS5zZXJ2ZXJEYXRhLFxuICAgICAgICAgICAgZ2V0IHVybCAoKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGxvYWRSZXNwb25zZS51cmw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IGFwcFVybCAoKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUuYXBwVXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGxvYWRSZXNwb25zZS5hcHBVcmw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdWZzVXJsOiB1cGxvYWRSZXNwb25zZS51ZnNVcmwsXG4gICAgICAgICAgICBjdXN0b21JZDogcHJlc2lnbmVkLmN1c3RvbUlkLFxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgZmlsZUhhc2g6IHVwbG9hZFJlc3BvbnNlLmZpbGVIYXNoXG4gICAgICAgIH0pKSk7XG5jb25zdCB1cGxvYWRGaWxlc0ludGVybmFsID0gKGVuZHBvaW50LCBvcHRzKT0+e1xuICAgIC8vIGNsYXNzaWMgc2VydmljZSByaWdodCBoZXJlXG4gICAgY29uc3QgcmVwb3J0RXZlbnRUb1VUID0gY3JlYXRlVVRSZXBvcnRlcih7XG4gICAgICAgIGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuICAgICAgICBwYWNrYWdlOiBvcHRzLnBhY2thZ2UsXG4gICAgICAgIHVybDogb3B0cy51cmwsXG4gICAgICAgIGhlYWRlcnM6IG9wdHMuaGVhZGVyc1xuICAgIH0pO1xuICAgIGNvbnN0IHRvdGFsU2l6ZSA9IG9wdHMuZmlsZXMucmVkdWNlKChhY2MsIGYpPT5hY2MgKyBmLnNpemUsIDApO1xuICAgIGxldCB0b3RhbExvYWRlZCA9IDA7XG4gICAgcmV0dXJuIE1pY3JvLmZsYXRNYXAocmVwb3J0RXZlbnRUb1VUKFwidXBsb2FkXCIsIHtcbiAgICAgICAgaW5wdXQ6IFwiaW5wdXRcIiBpbiBvcHRzID8gb3B0cy5pbnB1dCA6IG51bGwsXG4gICAgICAgIGZpbGVzOiBvcHRzLmZpbGVzLm1hcCgoZik9Pih7XG4gICAgICAgICAgICAgICAgbmFtZTogZi5uYW1lLFxuICAgICAgICAgICAgICAgIHNpemU6IGYuc2l6ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBmLnR5cGUsXG4gICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBmLmxhc3RNb2RpZmllZFxuICAgICAgICAgICAgfSkpXG4gICAgfSksIChwcmVzaWduZWRzKT0+TWljcm8uZm9yRWFjaChwcmVzaWduZWRzLCAocHJlc2lnbmVkLCBpKT0+TWljcm8uZmxhdE1hcChNaWNyby5zeW5jKCgpPT5vcHRzLm9uVXBsb2FkQmVnaW4/Lih7XG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IG9wdHMuZmlsZXNbaV0ubmFtZVxuICAgICAgICAgICAgICAgIH0pKSwgKCk9PnVwbG9hZEZpbGUob3B0cy5maWxlc1tpXSwgcHJlc2lnbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IChldik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTG9hZGVkICs9IGV2LmRlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IG9wdHMuZmlsZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGV2LmxvYWRlZCAvIG9wdHMuZmlsZXNbaV0uc2l6ZSAqIDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IGV2LmxvYWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogZXYuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxMb2FkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxQcm9ncmVzczogdG90YWxMb2FkZWQgLyB0b3RhbFNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogNlxuICAgICAgICB9KSk7XG59O1xuXG5leHBvcnQgeyB1cGxvYWRGaWxlLCB1cGxvYWRGaWxlc0ludGVybmFsIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/_internal/upload-browser.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/_internal/ut-reporter.js":
/*!****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/ut-reporter.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUTReporter: () => (/* binding */ createUTReporter)\n/* harmony export */ });\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Function */ \"(ssr)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\n\nvar version = \"7.7.2\";\n\nconst createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\n/**\n * Creates a \"client\" for reporting events to the UploadThing server via the user's API endpoint.\n * Events are handled in \"./handler.ts starting at L112\"\n */ const createUTReporter = (cfg)=>(type, payload)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.gen(function*() {\n            const url = createAPIRequestUrl({\n                url: cfg.url,\n                slug: cfg.endpoint,\n                actionType: type\n            });\n            const headers = new Headers((yield* effect_Micro__WEBPACK_IMPORTED_MODULE_0__.promise(async ()=>typeof cfg.headers === \"function\" ? await cfg.headers() : cfg.headers)));\n            if (cfg.package) {\n                headers.set(\"x-uploadthing-package\", cfg.package);\n            }\n            headers.set(\"x-uploadthing-version\", version);\n            headers.set(\"Content-Type\", \"application/json\");\n            const response = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fetchEff)(url, {\n                method: \"POST\",\n                body: JSON.stringify(payload),\n                headers\n            }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.parseResponseJson), /**\n         * We don't _need_ to validate the response here, just cast it for now.\n         * As of now, @effect/schema includes quite a few bytes we cut out by this...\n         * We have \"strong typing\" on the backend that ensures the shape should match.\n         */ effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(effect_Function__WEBPACK_IMPORTED_MODULE_2__.unsafeCoerce), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"FetchError\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: `Failed to report event \"${type}\" to UploadThing server`,\n                    cause: e\n                }))), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"BadRequestError\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.getErrorTypeFromStatusCode)(e.status),\n                    message: e.getMessage(),\n                    cause: e.json\n                }))), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"InvalidJson\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: \"Failed to parse response from UploadThing server\",\n                    cause: e\n                }))));\n            return response;\n        });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXQtcmVwb3J0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNUO0FBQzBFOztBQUVoSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDZDQUFTO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGdEQUFnRCxpREFBYTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDZEQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTyxpREFBYSxDQUFDLGtFQUFpQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUFTLENBQUMseURBQVksR0FBRyxrREFBYyxvQkFBb0IsOENBQVUsS0FBSyxpRUFBZ0I7QUFDdEc7QUFDQSx3REFBd0QsS0FBSztBQUM3RDtBQUNBLGlCQUFpQixLQUFLLGtEQUFjLHlCQUF5Qiw4Q0FBVSxLQUFLLGlFQUFnQjtBQUM1RiwwQkFBMEIsK0VBQTBCO0FBQ3BEO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSyxrREFBYyxxQkFBcUIsOENBQVUsS0FBSyxpRUFBZ0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUzs7QUFFbUIiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHV0LXJlcG9ydGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuc2FmZUNvZXJjZSB9IGZyb20gJ2VmZmVjdC9GdW5jdGlvbic7XG5pbXBvcnQgKiBhcyBNaWNybyBmcm9tICdlZmZlY3QvTWljcm8nO1xuaW1wb3J0IHsgZmV0Y2hFZmYsIHBhcnNlUmVzcG9uc2VKc29uLCBVcGxvYWRUaGluZ0Vycm9yLCBnZXRFcnJvclR5cGVGcm9tU3RhdHVzQ29kZSB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuXG52YXIgdmVyc2lvbiA9IFwiNy43LjJcIjtcblxuY29uc3QgY3JlYXRlQVBJUmVxdWVzdFVybCA9IChjb25maWcpPT57XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChjb25maWcudXJsKTtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCk7XG4gICAgcXVlcnlQYXJhbXMuc2V0KFwiYWN0aW9uVHlwZVwiLCBjb25maWcuYWN0aW9uVHlwZSk7XG4gICAgcXVlcnlQYXJhbXMuc2V0KFwic2x1Z1wiLCBjb25maWcuc2x1Zyk7XG4gICAgdXJsLnNlYXJjaCA9IHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHVybDtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBcImNsaWVudFwiIGZvciByZXBvcnRpbmcgZXZlbnRzIHRvIHRoZSBVcGxvYWRUaGluZyBzZXJ2ZXIgdmlhIHRoZSB1c2VyJ3MgQVBJIGVuZHBvaW50LlxuICogRXZlbnRzIGFyZSBoYW5kbGVkIGluIFwiLi9oYW5kbGVyLnRzIHN0YXJ0aW5nIGF0IEwxMTJcIlxuICovIGNvbnN0IGNyZWF0ZVVUUmVwb3J0ZXIgPSAoY2ZnKT0+KHR5cGUsIHBheWxvYWQpPT5NaWNyby5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gY3JlYXRlQVBJUmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBjZmcudXJsLFxuICAgICAgICAgICAgICAgIHNsdWc6IGNmZy5lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygoeWllbGQqIE1pY3JvLnByb21pc2UoYXN5bmMgKCk9PnR5cGVvZiBjZmcuaGVhZGVycyA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY2ZnLmhlYWRlcnMoKSA6IGNmZy5oZWFkZXJzKSkpO1xuICAgICAgICAgICAgaWYgKGNmZy5wYWNrYWdlKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIiwgY2ZnLnBhY2thZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIiwgdmVyc2lvbik7XG4gICAgICAgICAgICBoZWFkZXJzLnNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkKiBmZXRjaEVmZih1cmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgIH0pLnBpcGUoTWljcm8uYW5kVGhlbihwYXJzZVJlc3BvbnNlSnNvbiksIC8qKlxuICAgICAgICAgKiBXZSBkb24ndCBfbmVlZF8gdG8gdmFsaWRhdGUgdGhlIHJlc3BvbnNlIGhlcmUsIGp1c3QgY2FzdCBpdCBmb3Igbm93LlxuICAgICAgICAgKiBBcyBvZiBub3csIEBlZmZlY3Qvc2NoZW1hIGluY2x1ZGVzIHF1aXRlIGEgZmV3IGJ5dGVzIHdlIGN1dCBvdXQgYnkgdGhpcy4uLlxuICAgICAgICAgKiBXZSBoYXZlIFwic3Ryb25nIHR5cGluZ1wiIG9uIHRoZSBiYWNrZW5kIHRoYXQgZW5zdXJlcyB0aGUgc2hhcGUgc2hvdWxkIG1hdGNoLlxuICAgICAgICAgKi8gTWljcm8ubWFwKHVuc2FmZUNvZXJjZSksIE1pY3JvLmNhdGNoVGFnKFwiRmV0Y2hFcnJvclwiLCAoZSk9Pk1pY3JvLmZhaWwobmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX0NMSUVOVF9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHJlcG9ydCBldmVudCBcIiR7dHlwZX1cIiB0byBVcGxvYWRUaGluZyBzZXJ2ZXJgLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pKSksIE1pY3JvLmNhdGNoVGFnKFwiQmFkUmVxdWVzdEVycm9yXCIsIChlKT0+TWljcm8uZmFpbChuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IGdldEVycm9yVHlwZUZyb21TdGF0dXNDb2RlKGUuc3RhdHVzKSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5nZXRNZXNzYWdlKCksXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlLmpzb25cbiAgICAgICAgICAgICAgICB9KSkpLCBNaWNyby5jYXRjaFRhZyhcIkludmFsaWRKc29uXCIsIChlKT0+TWljcm8uZmFpbChuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfQ0xJRU5UX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGZyb20gVXBsb2FkVGhpbmcgc2VydmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlXG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0pO1xuXG5leHBvcnQgeyBjcmVhdGVVVFJlcG9ydGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/_internal/ut-reporter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/config.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/config.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   IsDevelopment: () => (/* binding */ IsDevelopment),\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ version),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   UtfsHost: () => (/* binding */ UtfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(rsc)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n\n\n\n\n\n\n\nvar version = \"7.7.2\";\n\n/**\n * Merge in `import.meta.env` to the built-in `process.env` provider\n * Prefix keys with `UPLOADTHING_` so we can reference just the name.\n * @example\n * process.env.UPLOADTHING_TOKEN = \"foo\"\n * Config.string(\"token\"); // Config<\"foo\">\n */ const envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)(// fuck this I give up. import.meta is a mistake, someone else can fix it\n     null ?? {}))), {\n        pathDelim: \"_\"\n    })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n * Config provider that merges the options from the object\n * and environment variables prefixed with `UPLOADTHING_`.\n * @remarks Options take precedence over environment variables.\n */ const configProvider = (options)=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(()=>effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : undefined).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_)=>_ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n    ConfigError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n            code: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n            message: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n            cause: e\n        })\n}));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(function*(preferredRegion) {\n    const { regions, ingestHost } = yield* UTToken;\n    const region = preferredRegion ? regions.find((r)=>r === preferredRegion) ?? regions[0] : regions[0];\n    return yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ2dCO0FBQ2hCO0FBQ0w7QUFDK0M7QUFDM0I7O0FBRXZEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCLDBEQUFzQixRQUFRLHlEQUFxQixLQUFLLDBEQUFzQix3QkFBd0IsOEVBQXlCO0FBQ3ZKLElBQUksS0FBZ0IsTUFBTTtBQUMxQjtBQUNBLEtBQUssSUFBSSx5REFBcUIsaUJBQWlCLCtEQUEyQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBdUIsY0FBYyxPQUFPLHlEQUFxQjtBQUN2RyxzQkFBc0Isa0RBQWMsZUFBZSxpREFBYSxLQUFLLGtEQUFjLGtDQUFrQyxhQUFvQixtQkFBbUIsOENBQVUsOEJBQThCLHNEQUFrQjtBQUN0TixnQkFBZ0IsaURBQVEsVUFBVSxnRUFBZ0IsT0FBTyxvREFBZ0I7QUFDekUsMEJBQTBCLGlFQUFnQjtBQUMxQztBQUNBLGtIQUFrSCxrREFBa0Q7QUFDcEs7QUFDQSxTQUFTO0FBQ1QsQ0FBQztBQUNELGVBQWUsaURBQWEsZ0JBQWdCLHNEQUFrQixpQ0FBaUMscURBQWlCLG1CQUFtQiw4Q0FBVTtBQUM3SSxrQkFBa0IsNkNBQVM7QUFDM0IsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQSxrQkFBa0IsaURBQWEsbUJBQW1CLHNEQUFrQixZQUFZLE9BQU8sR0FBRyxXQUFXLElBQUkscURBQWlCLG1CQUFtQiw4Q0FBVTtBQUN2SixDQUFDO0FBQ0QsaUJBQWlCLGlEQUFhLGtCQUFrQixzREFBa0I7QUFDbEUsZ0JBQWdCLGlEQUFhLGlCQUFpQixzREFBa0I7O0FBRXdEIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxjb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gJ2VmZmVjdC9Db25maWcnO1xuaW1wb3J0ICogYXMgQ29uZmlnUHJvdmlkZXIgZnJvbSAnZWZmZWN0L0NvbmZpZ1Byb3ZpZGVyJztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCAqIGFzIFMgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgeyBmaWx0ZXJEZWZpbmVkT2JqZWN0VmFsdWVzLCBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ1Rva2VuIH0gZnJvbSAnLi9zaGFyZWQtc2NoZW1hcy5qcyc7XG5cbnZhciB2ZXJzaW9uID0gXCI3LjcuMlwiO1xuXG4vKipcbiAqIE1lcmdlIGluIGBpbXBvcnQubWV0YS5lbnZgIHRvIHRoZSBidWlsdC1pbiBgcHJvY2Vzcy5lbnZgIHByb3ZpZGVyXG4gKiBQcmVmaXgga2V5cyB3aXRoIGBVUExPQURUSElOR19gIHNvIHdlIGNhbiByZWZlcmVuY2UganVzdCB0aGUgbmFtZS5cbiAqIEBleGFtcGxlXG4gKiBwcm9jZXNzLmVudi5VUExPQURUSElOR19UT0tFTiA9IFwiZm9vXCJcbiAqIENvbmZpZy5zdHJpbmcoXCJ0b2tlblwiKTsgLy8gQ29uZmlnPFwiZm9vXCI+XG4gKi8gY29uc3QgZW52UHJvdmlkZXIgPSBDb25maWdQcm92aWRlci5mcm9tRW52KCkucGlwZShDb25maWdQcm92aWRlci5vckVsc2UoKCk9PkNvbmZpZ1Byb3ZpZGVyLmZyb21NYXAobmV3IE1hcChPYmplY3QuZW50cmllcyhmaWx0ZXJEZWZpbmVkT2JqZWN0VmFsdWVzKC8vIGZ1Y2sgdGhpcyBJIGdpdmUgdXAuIGltcG9ydC5tZXRhIGlzIGEgbWlzdGFrZSwgc29tZW9uZSBlbHNlIGNhbiBmaXggaXRcbiAgICBpbXBvcnQubWV0YT8uZW52ID8/IHt9KSkpLCB7XG4gICAgICAgIHBhdGhEZWxpbTogXCJfXCJcbiAgICB9KSksIENvbmZpZ1Byb3ZpZGVyLm5lc3RlZChcInVwbG9hZHRoaW5nXCIpLCBDb25maWdQcm92aWRlci5jb25zdGFudENhc2UpO1xuLyoqXG4gKiBDb25maWcgcHJvdmlkZXIgdGhhdCBtZXJnZXMgdGhlIG9wdGlvbnMgZnJvbSB0aGUgb2JqZWN0XG4gKiBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHByZWZpeGVkIHdpdGggYFVQTE9BRFRISU5HX2AuXG4gKiBAcmVtYXJrcyBPcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqLyBjb25zdCBjb25maWdQcm92aWRlciA9IChvcHRpb25zKT0+Q29uZmlnUHJvdmlkZXIuZnJvbUpzb24ob3B0aW9ucyA/PyB7fSkucGlwZShDb25maWdQcm92aWRlci5vckVsc2UoKCk9PmVudlByb3ZpZGVyKSk7XG5jb25zdCBJc0RldmVsb3BtZW50ID0gQ29uZmlnLmJvb2xlYW4oXCJpc0RldlwiKS5waXBlKENvbmZpZy5vckVsc2UoKCk9PkNvbmZpZy5zdWNjZWVkKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgOiB1bmRlZmluZWQpLnBpcGUoQ29uZmlnLm1hcCgoXyk9Pl8gPT09IFwiZGV2ZWxvcG1lbnRcIikpKSwgQ29uZmlnLndpdGhEZWZhdWx0KGZhbHNlKSk7XG5jb25zdCBVVFRva2VuID0gUy5Db25maWcoXCJ0b2tlblwiLCBVcGxvYWRUaGluZ1Rva2VuKS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgIENvbmZpZ0Vycm9yOiAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IGUuX29wID09PSBcIkludmFsaWREYXRhXCIgPyBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiIDogXCJNSVNTSU5HX0VOVlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZS5fb3AgPT09IFwiSW52YWxpZERhdGFcIiA/IFwiSW52YWxpZCB0b2tlbi4gQSB0b2tlbiBpcyBhIGJhc2U2NCBlbmNvZGVkIEpTT04gb2JqZWN0IG1hdGNoaW5nIHsgYXBpS2V5OiBzdHJpbmcsIGFwcElkOiBzdHJpbmcsIHJlZ2lvbnM6IHN0cmluZ1tdIH0uXCIgOiBcIk1pc3NpbmcgdG9rZW4uIFBsZWFzZSBzZXQgdGhlIGBVUExPQURUSElOR19UT0tFTmAgZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgcHJvdmlkZSBhIHRva2VuIG1hbnVhbGx5IHRocm91Z2ggY29uZmlnLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgfSlcbn0pKTtcbmNvbnN0IEFwaVVybCA9IENvbmZpZy5zdHJpbmcoXCJhcGlVcmxcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoXCJodHRwczovL2FwaS51cGxvYWR0aGluZy5jb21cIiksIENvbmZpZy5tYXBBdHRlbXB0KChfKT0+bmV3IFVSTChfKSksIENvbmZpZy5tYXAoKHVybCk9PnVybC5ocmVmLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSkpO1xuY29uc3QgSW5nZXN0VXJsID0gRWZmZWN0LmZuKGZ1bmN0aW9uKihwcmVmZXJyZWRSZWdpb24pIHtcbiAgICBjb25zdCB7IHJlZ2lvbnMsIGluZ2VzdEhvc3QgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgIGNvbnN0IHJlZ2lvbiA9IHByZWZlcnJlZFJlZ2lvbiA/IHJlZ2lvbnMuZmluZCgocik9PnIgPT09IHByZWZlcnJlZFJlZ2lvbikgPz8gcmVnaW9uc1swXSA6IHJlZ2lvbnNbMF07XG4gICAgcmV0dXJuIHlpZWxkKiBDb25maWcuc3RyaW5nKFwiaW5nZXN0VXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KGBodHRwczovLyR7cmVnaW9ufS4ke2luZ2VzdEhvc3R9YCksIENvbmZpZy5tYXBBdHRlbXB0KChfKT0+bmV3IFVSTChfKSksIENvbmZpZy5tYXAoKHVybCk9PnVybC5ocmVmLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSkpO1xufSk7XG5jb25zdCBVdGZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1dGZzSG9zdFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInV0ZnMuaW9cIikpO1xuY29uc3QgVWZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1ZnNIb3N0XCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwidWZzLnNoXCIpKTtcblxuZXhwb3J0IHsgQXBpVXJsLCBJbmdlc3RVcmwsIElzRGV2ZWxvcG1lbnQsIHZlcnNpb24gYXMgVVBMT0FEVEhJTkdfVkVSU0lPTiwgVVRUb2tlbiwgVWZzSG9zdCwgVXRmc0hvc3QsIGNvbmZpZ1Byb3ZpZGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/deprecations.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\nconst logDeprecationWarning = (message)=>{\n    // eslint-disable-next-line no-console\n    console.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZGVwcmVjYXRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsaURBQWlELFFBQVE7QUFDekQ7O0FBRWlDIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxkZXByZWNhdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbG9nRGVwcmVjYXRpb25XYXJuaW5nID0gKG1lc3NhZ2UpPT57XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBbdXBsb2FkdGhpbmddW2RlcHJlY2F0ZWRdICR7bWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js":
/*!********************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/error-formatter.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError)\n/* harmony export */ });\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    const firstSlug = Object.keys(router)[0];\n    const errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n    return errorFormatter(error);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZXJyb3ItZm9ybWF0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThDIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxlcnJvci1mb3JtYXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgIH07XG59XG5mdW5jdGlvbiBmb3JtYXRFcnJvcihlcnJvciwgcm91dGVyKSB7XG4gICAgY29uc3QgZmlyc3RTbHVnID0gT2JqZWN0LmtleXMocm91dGVyKVswXTtcbiAgICBjb25zdCBlcnJvckZvcm1hdHRlciA9IGZpcnN0U2x1ZyA/IHJvdXRlcltmaXJzdFNsdWddPy5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIgOiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXI7XG4gICAgcmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuZXhwb3J0IHsgZGVmYXVsdEVycm9yRm9ybWF0dGVyLCBmb3JtYXRFcnJvciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/handler.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/handler.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Match */ \"(rsc)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n/* harmony import */ var _jsonl_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./jsonl.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parser.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\");\n/* harmony import */ var _route_config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar version = \"7.7.2\";\n\nclass AdapterArguments extends effect_Context__WEBPACK_IMPORTED_MODULE_0__.Tag(\"uploadthing/AdapterArguments\")() {\n}\n/**\n * Create a request handler adapter for any framework or server library.\n * Refer to the existing adapters for examples on how to use this function.\n * @public\n *\n * @param makeAdapterArgs - Function that takes the args from your framework and returns an Effect that resolves to the adapter args.\n * These args are passed to the `.middleware`, `.onUploadComplete`, and `.onUploadError` hooks.\n * @param toRequest - Function that takes the args from your framework and returns an Effect that resolves to a web Request object.\n * @param opts - The router config and other options that are normally passed to `createRequestHandler` of official adapters\n * @param beAdapter - [Optional] The adapter name of the adapter, used for telemetry purposes\n * @returns A function that takes the args from your framework and returns a promise that resolves to a Response object.\n */ const makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter)=>{\n    const managed = (0,_runtime_js__WEBPACK_IMPORTED_MODULE_1__.makeRuntime)(opts.config?.fetch, opts.config);\n    const handle = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runtime().then(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.toWebHandlerRuntime));\n    const app = (...args)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runPromise(createRequestHandler(opts, beAdapter ?? \"custom\"))), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n    return async (...args)=>{\n        const result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"requestHandler\"), managed.runPromise);\n        return result;\n    };\n};\nconst createRequestHandler = (opts, beAdapter)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const isDevelopment = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        const routerConfig = yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(opts.router);\n        const handleDaemon = (()=>{\n            if (opts.config?.handleDaemonPromise) {\n                return opts.config.handleDaemonPromise;\n            }\n            return isDevelopment ? \"void\" : \"await\";\n        })();\n        if (isDevelopment && handleDaemon === \"await\") {\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: 'handleDaemonPromise: \"await\" is forbidden in development.'\n            });\n        }\n        const GET = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(routerConfig);\n        });\n        const POST = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                \"uploadthing-hook\": _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                \"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>\"unknown\"\n                })),\n                \"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>version\n                }))\n            }));\n            if (clientVersion !== version) {\n                const serverVersion = version;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                    clientVersion,\n                    serverVersion\n                }));\n            }\n            const { slug, actionType } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_11__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                actionType: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                slug: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n            }));\n            const uploadable = opts.router[slug];\n            if (!uploadable) {\n                const msg = `No file route found for slug ${slug}`;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"NOT_FOUND\",\n                    message: msg\n                });\n            }\n            const { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_12__.value({\n                actionType,\n                uploadthingHook\n            }).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: \"upload\",\n                uploadthingHook: undefined\n            }, ()=>handleUploadAction({\n                    uploadable,\n                    fePackage,\n                    beAdapter,\n                    slug\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"callback\"\n            }, ()=>handleCallbackRequest({\n                    uploadable,\n                    fePackage,\n                    beAdapter\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"error\"\n            }, ()=>handleErrorRequest({\n                    uploadable\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.orElse(()=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.succeed({\n                    body: null,\n                    fiber: null\n                })));\n            if (fiber) {\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"handleDaemon\", handleDaemon));\n                if (handleDaemon === \"void\") ; else if (handleDaemon === \"await\") {\n                    yield* fiber.await;\n                } else if (typeof handleDaemon === \"function\") {\n                    handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.runPromise(fiber.await));\n                }\n            }\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"body\", body));\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(body);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            ParseError: (e)=>_effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: e.message\n                }), opts.router), {\n                    status: 400\n                }),\n            UploadThingError: (e)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(e, opts.router), {\n                    status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.getStatusCodeFromError)(e)\n                })\n        }));\n        const appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.setHeader(\"x-uploadthing-version\", version));\n        return _effect_platform__WEBPACK_IMPORTED_MODULE_11__.empty.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_11__.get(\"*\", GET), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.post(\"*\", POST), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.use(appendResponseHeaders));\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            fileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            error: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        const adapterArgs = yield* AdapterArguments;\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.onUploadError({\n                    ...adapterArgs,\n                    error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"UPLOAD_FAILED\",\n                        message: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n                    }),\n                    fileKey: requestInput.fileKey\n                }),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run onUploadError\",\n                    cause: error\n                })\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable, fePackage, beAdapter } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            status: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData,\n            origin: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            metadata: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Record({\n                key: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n                value: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Unknown\n            })\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        /**\n     * Run `.onUploadComplete` as a daemon to prevent the\n     * request from UT to potentially timeout.\n     */ const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const adapterArgs = yield* AdapterArguments;\n            const serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n                try: async ()=>uploadable.onUploadComplete({\n                        ...adapterArgs,\n                        file: {\n                            ...requestInput.file,\n                            get url () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.url;\n                            },\n                            get appUrl () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.appUrl;\n                            }\n                        },\n                        metadata: requestInput.metadata\n                    }),\n                catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"INTERNAL_SERVER_ERROR\",\n                        message: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n                        cause: error\n                    })\n            });\n            const payload = {\n                fileKey: requestInput.file.key,\n                callbackData: serverData ?? null\n            };\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"callbackData\", payload));\n            const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n            yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(`/callback-result`).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(requestInput.origin), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { json: { files, input }, uploadable } = opts;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running middleware\");\n        const adapterArgs = yield* AdapterArguments;\n        const metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.middleware({\n                    ...adapterArgs,\n                    input,\n                    files\n                }),\n            catch: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run middleware\",\n                    cause: error\n                })\n        });\n        if (metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles] && metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length !== files.length) {\n            const msg = `Expected files override to have the same length as original files, got ${metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length} but expected ${files.length}`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Files override must have the same length as files\",\n                cause: msg\n            });\n        }\n        // Attach customIds from middleware to the files\n        const filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(files, (file, idx)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const theirs = metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles]?.[idx];\n                if (theirs && theirs.size !== file.size) {\n                    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"File size mismatch. Reverting to original size\");\n                }\n                return {\n                    name: theirs?.name ?? file.name,\n                    size: file.size,\n                    type: file.type,\n                    customId: theirs?.customId,\n                    lastModified: theirs?.lastModified ?? Date.now()\n                };\n            }));\n        return {\n            metadata,\n            filesWithCustomIds,\n            preferredRegion: metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTRegion]\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n        const { uploadable, fePackage, beAdapter, slug } = opts;\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadActionPayload);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", json));\n        // validate the input\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing user input\");\n        const parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: ()=>(0,_parser_js__WEBPACK_IMPORTED_MODULE_21__.getParseFn)(uploadable.inputParser)(json.input),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: error\n                })\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"input\", parsedInput));\n        const { metadata, filesWithCustomIds, preferredRegion } = yield* runRouteMiddleware({\n            json: {\n                input: parsedInput,\n                files: json.files\n            },\n            uploadable\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n        const parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"InvalidRouteConfig\", (err)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid route config\",\n                cause: err\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routeConfig\", parsedConfig));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"files\", json.files));\n        yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.assertFilesMeetConfig)(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Invalid config: ${e._tag}`,\n                cause: \"reason\" in e ? e.reason : e.message\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Files validated.\");\n        const fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(filesWithCustomIds, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.objectKeys)(parsedConfig)), (type)=>({\n                    name: file.name,\n                    size: file.size,\n                    type: file.type || type,\n                    lastModified: file.lastModified,\n                    customId: file.customId,\n                    contentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n                    acl: parsedConfig[type]?.acl\n                }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            /** Shouldn't happen since config is validated above so just dying is fine I think */ InvalidFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e),\n            UnknownFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e)\n        }));\n        const routeOptions = uploadable.routeOptions;\n        const { apiKey, appId } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const ingestUrl = yield* (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.IngestUrl)(preferredRegion);\n        const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"ingestUrl\", ingestUrl));\n        const presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(fileUploadRequests, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId, routeOptions.getFileHashParts);\n                const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n                    ttlInSeconds: routeOptions.presignedURLTTL,\n                    data: {\n                        \"x-ut-identifier\": appId,\n                        \"x-ut-file-name\": file.name,\n                        \"x-ut-file-size\": file.size,\n                        \"x-ut-file-type\": file.type,\n                        \"x-ut-slug\": slug,\n                        \"x-ut-custom-id\": file.customId,\n                        \"x-ut-content-disposition\": file.contentDisposition,\n                        \"x-ut-acl\": file.acl\n                    }\n                });\n                return {\n                    url,\n                    key\n                };\n            }), {\n            concurrency: \"unbounded\"\n        });\n        const serverReq = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const requestUrl = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.toURL(serverReq);\n        const devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_22__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_22__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((url)=>_effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.appendUrlParam(\"slug\", slug))));\n        const metadataRequest = _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/route-metadata\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n            \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n            \"x-uploadthing-version\": version,\n            \"x-uploadthing-be-adapter\": beAdapter,\n            \"x-uploadthing-fe-package\": fePackage\n        }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n            fileKeys: presignedUrls.map(({ key })=>key),\n            metadata: metadata,\n            isDev,\n            callbackUrl: devHookRequest.url,\n            callbackSlug: slug,\n            awaitServerData: routeOptions.awaitServerData ?? true\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n        const handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.fn(\"handleDevStreamError\")(function*(err, chunk) {\n            const schema = effect_Schema__WEBPACK_IMPORTED_MODULE_9__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData\n            }));\n            const parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_9__.decodeUnknown(schema)(chunk);\n            const key = parsedChunk.file.key;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                fileKey: key,\n                error: err.message\n            }));\n            const httpResponse = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/callback-result\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n                fileKey: key,\n                error: `Failed to forward callback request from dev stream: ${err.message}`\n            }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n            yield* (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Reported callback error to UploadThing\")(httpResponse);\n        });\n        // Send metadata to UT server (non blocking as a daemon)\n        // In dev, keep the stream open and simulate the callback requests as\n        // files complete uploading\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__[\"if\"](isDev, {\n            onTrue: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\", {\n                        mixin: \"None\"\n                    }),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), _effect_platform__WEBPACK_IMPORTED_MODULE_23__.stream, (0,_jsonl_js__WEBPACK_IMPORTED_MODULE_24__.handleJsonLineStream)(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchStreamPart, (chunk)=>devHookRequest.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                        \"uploadthing-hook\": chunk.hook,\n                        \"x-uploadthing-signature\": chunk.signature\n                    }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setBody(_effect_platform__WEBPACK_IMPORTED_MODULE_25__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"ResponseError\", (err)=>handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped))),\n            onFalse: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\"),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped)\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        const presigneds = presignedUrls.map((p, i)=>({\n                url: p.url,\n                key: p.key,\n                name: fileUploadRequests[i].name,\n                customId: fileUploadRequests[i].customId ?? null\n            }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"presignedUrls\", presigneds));\n        return {\n            body: presigneds,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleUploadAction\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEySjtBQUNuSDtBQUNFO0FBQ0Y7QUFDRjtBQUNNO0FBQ0o7QUFDeUk7QUFDakg7QUFDTjtBQUNQO0FBQ0Q7QUFDc0I7QUFDL0I7QUFDc0M7QUFDcEM7QUFDc0k7QUFDbEk7O0FBRS9DOztBQUVBLCtCQUErQiwrQ0FBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBVztBQUMvQixtQkFBbUIsa0RBQWMsNEJBQTRCLGlFQUEyQjtBQUN4RiwyQkFBMkIsOENBQVUsQ0FBQyxrREFBYyw2RUFBNkUsK0RBQTJCO0FBQzVKO0FBQ0EseUNBQXlDLDZDQUFTLGdCQUFnQiw2Q0FBUyxzQkFBc0Isc0RBQWtCO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCw4Q0FBVTtBQUMxRCxxQ0FBcUMscURBQWE7QUFDbEQsb0NBQW9DLHFFQUFtQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsOEJBQThCLGlFQUFnQjtBQUM5QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esb0JBQW9CLDhDQUFVO0FBQzlCLDBCQUEwQixrREFBdUI7QUFDakQsU0FBUztBQUNULHFCQUFxQiw4Q0FBVTtBQUMvQixvQkFBb0Isa0hBQWtILFNBQVMsMkRBQStCLENBQUMsaURBQWE7QUFDNUwsb0NBQW9DLGdFQUFlLE1BQU0sbURBQWU7QUFDeEUseUNBQXlDLGlEQUFhLE1BQU0sdURBQW1CO0FBQy9FO0FBQ0EsaUJBQWlCO0FBQ2pCLHlDQUF5QyxpREFBYSxNQUFNLHVEQUFtQjtBQUMvRTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLHVCQUF1QixxREFBaUIs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XFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXGhhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cEFwcCwgSHR0cFNlcnZlclJlc3BvbnNlLCBIdHRwU2VydmVyUmVxdWVzdCwgSHR0cFJvdXRlciwgSHR0cENsaWVudCwgSHR0cENsaWVudFJlcXVlc3QsIEh0dHBDbGllbnRSZXNwb25zZSwgSHR0cEJvZHkgfSBmcm9tICdAZWZmZWN0L3BsYXRmb3JtJztcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tICdlZmZlY3QvQ29uZmlnJztcbmltcG9ydCAqIGFzIENvbnRleHQgZnJvbSAnZWZmZWN0L0NvbnRleHQnO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0ICogYXMgTWF0Y2ggZnJvbSAnZWZmZWN0L01hdGNoJztcbmltcG9ydCAqIGFzIFJlZGFjdGVkIGZyb20gJ2VmZmVjdC9SZWRhY3RlZCc7XG5pbXBvcnQgKiBhcyBTY2hlbWEgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yLCBnZXRTdGF0dXNDb2RlRnJvbUVycm9yLCB2ZXJpZnlTaWduYXR1cmUsIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBtYXRjaEZpbGVUeXBlLCBvYmplY3RLZXlzLCBnZW5lcmF0ZUtleSwgZ2VuZXJhdGVTaWduZWRVUkwgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IElzRGV2ZWxvcG1lbnQsIFVUVG9rZW4sIEluZ2VzdFVybCB9IGZyb20gJy4vY29uZmlnLmpzJztcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gJy4vZGVwcmVjYXRpb25zLmpzJztcbmltcG9ydCB7IGZvcm1hdEVycm9yIH0gZnJvbSAnLi9lcnJvci1mb3JtYXR0ZXIuanMnO1xuaW1wb3J0IHsgaGFuZGxlSnNvbkxpbmVTdHJlYW0gfSBmcm9tICcuL2pzb25sLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2V0UGFyc2VGbiB9IGZyb20gJy4vcGFyc2VyLmpzJztcbmltcG9ydCB7IGV4dHJhY3RSb3V0ZXJDb25maWcsIGFzc2VydEZpbGVzTWVldENvbmZpZyB9IGZyb20gJy4vcm91dGUtY29uZmlnLmpzJztcbmltcG9ydCB7IG1ha2VSdW50aW1lIH0gZnJvbSAnLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nSG9vaywgQWN0aW9uVHlwZSwgVXBsb2FkZWRGaWxlRGF0YSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCB9IGZyb20gJy4vc2hhcmVkLXNjaGVtYXMuanMnO1xuaW1wb3J0IHsgVVRGaWxlcywgVVRSZWdpb24gfSBmcm9tICcuL3R5cGVzLmpzJztcblxudmFyIHZlcnNpb24gPSBcIjcuNy4yXCI7XG5cbmNsYXNzIEFkYXB0ZXJBcmd1bWVudHMgZXh0ZW5kcyBDb250ZXh0LlRhZyhcInVwbG9hZHRoaW5nL0FkYXB0ZXJBcmd1bWVudHNcIikoKSB7XG59XG4vKipcbiAqIENyZWF0ZSBhIHJlcXVlc3QgaGFuZGxlciBhZGFwdGVyIGZvciBhbnkgZnJhbWV3b3JrIG9yIHNlcnZlciBsaWJyYXJ5LlxuICogUmVmZXIgdG8gdGhlIGV4aXN0aW5nIGFkYXB0ZXJzIGZvciBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZnVuY3Rpb24uXG4gKiBAcHVibGljXG4gKlxuICogQHBhcmFtIG1ha2VBZGFwdGVyQXJncyAtIEZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhbiBFZmZlY3QgdGhhdCByZXNvbHZlcyB0byB0aGUgYWRhcHRlciBhcmdzLlxuICogVGhlc2UgYXJncyBhcmUgcGFzc2VkIHRvIHRoZSBgLm1pZGRsZXdhcmVgLCBgLm9uVXBsb2FkQ29tcGxldGVgLCBhbmQgYC5vblVwbG9hZEVycm9yYCBob29rcy5cbiAqIEBwYXJhbSB0b1JlcXVlc3QgLSBGdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBhcmdzIGZyb20geW91ciBmcmFtZXdvcmsgYW5kIHJldHVybnMgYW4gRWZmZWN0IHRoYXQgcmVzb2x2ZXMgdG8gYSB3ZWIgUmVxdWVzdCBvYmplY3QuXG4gKiBAcGFyYW0gb3B0cyAtIFRoZSByb3V0ZXIgY29uZmlnIGFuZCBvdGhlciBvcHRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHBhc3NlZCB0byBgY3JlYXRlUmVxdWVzdEhhbmRsZXJgIG9mIG9mZmljaWFsIGFkYXB0ZXJzXG4gKiBAcGFyYW0gYmVBZGFwdGVyIC0gW09wdGlvbmFsXSBUaGUgYWRhcHRlciBuYW1lIG9mIHRoZSBhZGFwdGVyLCB1c2VkIGZvciB0ZWxlbWV0cnkgcHVycG9zZXNcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgUmVzcG9uc2Ugb2JqZWN0LlxuICovIGNvbnN0IG1ha2VBZGFwdGVySGFuZGxlciA9IChtYWtlQWRhcHRlckFyZ3MsIHRvUmVxdWVzdCwgb3B0cywgYmVBZGFwdGVyKT0+e1xuICAgIGNvbnN0IG1hbmFnZWQgPSBtYWtlUnVudGltZShvcHRzLmNvbmZpZz8uZmV0Y2gsIG9wdHMuY29uZmlnKTtcbiAgICBjb25zdCBoYW5kbGUgPSBFZmZlY3QucHJvbWlzZSgoKT0+bWFuYWdlZC5ydW50aW1lKCkudGhlbihIdHRwQXBwLnRvV2ViSGFuZGxlclJ1bnRpbWUpKTtcbiAgICBjb25zdCBhcHAgPSAoLi4uYXJncyk9PkVmZmVjdC5tYXAoRWZmZWN0LnByb21pc2UoKCk9Pm1hbmFnZWQucnVuUHJvbWlzZShjcmVhdGVSZXF1ZXN0SGFuZGxlcihvcHRzLCBiZUFkYXB0ZXIgPz8gXCJjdXN0b21cIikpKSwgRWZmZWN0LnByb3ZpZGVTZXJ2aWNlRWZmZWN0KEFkYXB0ZXJBcmd1bWVudHMsIG1ha2VBZGFwdGVyQXJncyguLi5hcmdzKSkpO1xuICAgIHJldHVybiBhc3luYyAoLi4uYXJncyk9PntcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlLnBpcGUoRWZmZWN0LmFwKGFwcCguLi5hcmdzKSksIEVmZmVjdC5hcCh0b1JlcXVlc3QoLi4uYXJncykpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJyZXF1ZXN0SGFuZGxlclwiKSwgbWFuYWdlZC5ydW5Qcm9taXNlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufTtcbmNvbnN0IGNyZWF0ZVJlcXVlc3RIYW5kbGVyID0gKG9wdHMsIGJlQWRhcHRlcik9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0geWllbGQqIElzRGV2ZWxvcG1lbnQ7XG4gICAgICAgIGNvbnN0IHJvdXRlckNvbmZpZyA9IHlpZWxkKiBleHRyYWN0Um91dGVyQ29uZmlnKG9wdHMucm91dGVyKTtcbiAgICAgICAgY29uc3QgaGFuZGxlRGFlbW9uID0gKCgpPT57XG4gICAgICAgICAgICBpZiAob3B0cy5jb25maWc/LmhhbmRsZURhZW1vblByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5jb25maWcuaGFuZGxlRGFlbW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0RldmVsb3BtZW50ID8gXCJ2b2lkXCIgOiBcImF3YWl0XCI7XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGlmIChpc0RldmVsb3BtZW50ICYmIGhhbmRsZURhZW1vbiA9PT0gXCJhd2FpdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdoYW5kbGVEYWVtb25Qcm9taXNlOiBcImF3YWl0XCIgaXMgZm9yYmlkZGVuIGluIGRldmVsb3BtZW50LidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IEdFVCA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihyb3V0ZXJDb25maWcpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgUE9TVCA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgeyBcInVwbG9hZHRoaW5nLWhvb2tcIjogdXBsb2FkdGhpbmdIb29rLCBcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiOiBmZVBhY2thZ2UsIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IGNsaWVudFZlcnNpb24gfSA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFIZWFkZXJzKFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgIFwidXBsb2FkdGhpbmctaG9va1wiOiBVcGxvYWRUaGluZ0hvb2sucGlwZShTY2hlbWEub3B0aW9uYWwpLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IFNjaGVtYS5TdHJpbmcucGlwZShTY2hlbWEub3B0aW9uYWxXaXRoKHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCk9PlwidW5rbm93blwiXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFNjaGVtYS5TdHJpbmcucGlwZShTY2hlbWEub3B0aW9uYWxXaXRoKHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCk9PnZlcnNpb25cbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChjbGllbnRWZXJzaW9uICE9PSB2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyVmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiQ2xpZW50IHZlcnNpb24gbWlzbWF0Y2guIFRoaW5ncyBtYXkgbm90IHdvcmsgYXMgZXhwZWN0ZWQsIHBsZWFzZSBzeW5jIHlvdXIgdmVyc2lvbnMgdG8gZW5zdXJlIGNvbXBhdGliaWxpdHkuXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyh7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclZlcnNpb25cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHNsdWcsIGFjdGlvblR5cGUgfSA9IHlpZWxkKiBIdHRwUm91dGVyLnNjaGVtYVBhcmFtcyhTY2hlbWEuU3RydWN0KHtcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiBBY3Rpb25UeXBlLnBpcGUoU2NoZW1hLm9wdGlvbmFsKSxcbiAgICAgICAgICAgICAgICBzbHVnOiBTY2hlbWEuU3RyaW5nXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCB1cGxvYWRhYmxlID0gb3B0cy5yb3V0ZXJbc2x1Z107XG4gICAgICAgICAgICBpZiAoIXVwbG9hZGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YDtcbiAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBib2R5LCBmaWJlciB9ID0geWllbGQqIE1hdGNoLnZhbHVlKHtcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlLFxuICAgICAgICAgICAgICAgIHVwbG9hZHRoaW5nSG9va1xuICAgICAgICAgICAgfSkucGlwZShNYXRjaC53aGVuKHtcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiBcInVwbG9hZFwiLFxuICAgICAgICAgICAgICAgIHVwbG9hZHRoaW5nSG9vazogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCAoKT0+aGFuZGxlVXBsb2FkQWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZmVQYWNrYWdlLFxuICAgICAgICAgICAgICAgICAgICBiZUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgIHNsdWdcbiAgICAgICAgICAgICAgICB9KSksIE1hdGNoLndoZW4oe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB1cGxvYWR0aGluZ0hvb2s6IFwiY2FsbGJhY2tcIlxuICAgICAgICAgICAgfSwgKCk9PmhhbmRsZUNhbGxiYWNrUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGFibGUsXG4gICAgICAgICAgICAgICAgICAgIGZlUGFja2FnZSxcbiAgICAgICAgICAgICAgICAgICAgYmVBZGFwdGVyXG4gICAgICAgICAgICAgICAgfSkpLCBNYXRjaC53aGVuKHtcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdXBsb2FkdGhpbmdIb29rOiBcImVycm9yXCJcbiAgICAgICAgICAgIH0sICgpPT5oYW5kbGVFcnJvclJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRhYmxlXG4gICAgICAgICAgICAgICAgfSkpLCBNYXRjaC5vckVsc2UoKCk9PkVmZmVjdC5zdWNjZWVkKHtcbiAgICAgICAgICAgICAgICAgICAgYm9keTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZmliZXI6IG51bGxcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgaWYgKGZpYmVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJ1bm5pbmcgZmliZXIgYXMgZGFlbW9uXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImhhbmRsZURhZW1vblwiLCBoYW5kbGVEYWVtb24pKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlRGFlbW9uID09PSBcInZvaWRcIikgOyBlbHNlIGlmIChoYW5kbGVEYWVtb24gPT09IFwiYXdhaXRcIikge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCogZmliZXIuYXdhaXQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaGFuZGxlRGFlbW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGFlbW9uKEVmZmVjdC5ydW5Qcm9taXNlKGZpYmVyLmF3YWl0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlNlbmRpbmcgcmVzcG9uc2VcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiYm9keVwiLCBib2R5KSk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGJvZHkpO1xuICAgICAgICB9KS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgICAgICAgICAgUGFyc2VFcnJvcjogKGUpPT5IdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGlucHV0XCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICB9KSwgb3B0cy5yb3V0ZXIpLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDAwXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBVcGxvYWRUaGluZ0Vycm9yOiAoZSk9Pi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICAgICAgSHR0cFNlcnZlclJlc3BvbnNlLmpzb24oZm9ybWF0RXJyb3IoZSwgb3B0cy5yb3V0ZXIpLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogZ2V0U3RhdHVzQ29kZUZyb21FcnJvcihlKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgYXBwZW5kUmVzcG9uc2VIZWFkZXJzID0gRWZmZWN0Lm1hcChIdHRwU2VydmVyUmVzcG9uc2Uuc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pKTtcbiAgICAgICAgcmV0dXJuIEh0dHBSb3V0ZXIuZW1wdHkucGlwZShIdHRwUm91dGVyLmdldChcIipcIiwgR0VUKSwgSHR0cFJvdXRlci5wb3N0KFwiKlwiLCBQT1NUKSwgSHR0cFJvdXRlci51c2UoYXBwZW5kUmVzcG9uc2VIZWFkZXJzKSk7XG4gICAgfSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJjcmVhdGVSZXF1ZXN0SGFuZGxlclwiKSk7XG5jb25zdCBoYW5kbGVFcnJvclJlcXVlc3QgPSAob3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCB7IHVwbG9hZGFibGUgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgY29uc3QgdmVyaWZpZWQgPSB5aWVsZCogdmVyaWZ5U2lnbmF0dXJlKCh5aWVsZCogcmVxdWVzdC50ZXh0KSwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBzaWduYXR1cmVcIik7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0SW5wdXQgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICBmaWxlS2V5OiBTY2hlbWEuU3RyaW5nLFxuICAgICAgICAgICAgZXJyb3I6IFNjaGVtYS5TdHJpbmdcbiAgICAgICAgfSkpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgZXJyb3IgY2FsbGJhY2sgcmVxdWVzdCB3aXRoIGlucHV0OlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIHJlcXVlc3RJbnB1dCkpO1xuICAgICAgICBjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuICAgICAgICBjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICB0cnk6IGFzeW5jICgpPT51cGxvYWRhYmxlLm9uVXBsb2FkRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAuLi5hZGFwdGVyQXJncyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFVwbG9hZCBmYWlsZWQgZm9yICR7cmVxdWVzdElucHV0LmZpbGVLZXl9OiAke3JlcXVlc3RJbnB1dC5lcnJvcn1gXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBmaWxlS2V5OiByZXF1ZXN0SW5wdXQuZmlsZUtleVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY2F0Y2g6IChlcnJvcik9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSkucGlwZShFZmZlY3QudGFwRXJyb3IoKGVycm9yKT0+RWZmZWN0LmxvZ0Vycm9yKFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJlcnJvclwiLCBlcnJvcikpKSkucGlwZShFZmZlY3QuaWdub3JlTG9nZ2VkLCBFZmZlY3QuZm9ya0RhZW1vbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib2R5OiBudWxsLFxuICAgICAgICAgICAgZmliZXJcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZUVycm9yUmVxdWVzdFwiKSk7XG5jb25zdCBoYW5kbGVDYWxsYmFja1JlcXVlc3QgPSAob3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCB7IHVwbG9hZGFibGUsIGZlUGFja2FnZSwgYmVBZGFwdGVyIH0gPSBvcHRzO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuICAgICAgICBjb25zdCB7IGFwaUtleSB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgICAgIGNvbnN0IHZlcmlmaWVkID0geWllbGQqIHZlcmlmeVNpZ25hdHVyZSgoeWllbGQqIHJlcXVlc3QudGV4dCksIHJlcXVlc3QuaGVhZGVyc1tcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCJdID8/IG51bGwsIGFwaUtleSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoYFNpZ25hdHVyZSB2ZXJpZmllZDogJHt2ZXJpZmllZH1gKTtcbiAgICAgICAgaWYgKCF2ZXJpZmllZCkge1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBzaWduYXR1cmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdElucHV0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUJvZHlKc29uKFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiBTY2hlbWEuU3RyaW5nLFxuICAgICAgICAgICAgZmlsZTogVXBsb2FkZWRGaWxlRGF0YSxcbiAgICAgICAgICAgIG9yaWdpbjogU2NoZW1hLlN0cmluZyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBTY2hlbWEuUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXk6IFNjaGVtYS5TdHJpbmcsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFNjaGVtYS5Vbmtub3duXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwgcmVxdWVzdElucHV0KSk7XG4gICAgICAgIC8qKlxuICAgICAqIFJ1biBgLm9uVXBsb2FkQ29tcGxldGVgIGFzIGEgZGFlbW9uIHRvIHByZXZlbnQgdGhlXG4gICAgICogcmVxdWVzdCBmcm9tIFVUIHRvIHBvdGVudGlhbGx5IHRpbWVvdXQuXG4gICAgICovIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuICAgICAgICAgICAgICAgIHRyeTogYXN5bmMgKCk9PnVwbG9hZGFibGUub25VcGxvYWRDb21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZGFwdGVyQXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0SW5wdXQuZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgdXJsICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdElucHV0LmZpbGUudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGFwcFVybCAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLmFwcFVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RJbnB1dC5maWxlLmFwcFVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJlcXVlc3RJbnB1dC5tZXRhZGF0YVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZENvbXBsZXRlLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgZmlsZUtleTogcmVxdWVzdElucHV0LmZpbGUua2V5LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrRGF0YTogc2VydmVyRGF0YSA/PyBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIidvblVwbG9hZENvbXBsZXRlJyBjYWxsYmFjayBmaW5pc2hlZC4gU2VuZGluZyByZXNwb25zZSB0byBVcGxvYWRUaGluZzpcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiY2FsbGJhY2tEYXRhXCIsIHBheWxvYWQpKTtcbiAgICAgICAgICAgIGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcbiAgICAgICAgICAgIHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KGAvY2FsbGJhY2stcmVzdWx0YCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5wcmVwZW5kVXJsKHJlcXVlc3RJbnB1dC5vcmlnaW4pLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuICAgICAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHBheWxvYWQpLCBFZmZlY3QuZmxhdE1hcChodHRwQ2xpZW50LmV4ZWN1dGUpLCBFZmZlY3QudGFwRXJyb3IobG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGNhbGxiYWNrIHJlc3VsdFwiKSksIEVmZmVjdC5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihDYWxsYmFja1Jlc3VsdFJlc3BvbnNlKSksIEVmZmVjdC50YXAoRWZmZWN0LmxvZyhcIlNlbnQgY2FsbGJhY2sgcmVzdWx0IHRvIFVwbG9hZFRoaW5nXCIpKSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgIH0pLnBpcGUoRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LmZvcmtEYWVtb24pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9keTogbnVsbCxcbiAgICAgICAgICAgIGZpYmVyXG4gICAgICAgIH07XG4gICAgfSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVDYWxsYmFja1JlcXVlc3RcIikpO1xuY29uc3QgcnVuUm91dGVNaWRkbGV3YXJlID0gKG9wdHMpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgeyBqc29uOiB7IGZpbGVzLCBpbnB1dCB9LCB1cGxvYWRhYmxlIH0gPSBvcHRzO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyBtaWRkbGV3YXJlXCIpO1xuICAgICAgICBjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICB0cnk6IGFzeW5jICgpPT51cGxvYWRhYmxlLm1pZGRsZXdhcmUoe1xuICAgICAgICAgICAgICAgICAgICAuLi5hZGFwdGVyQXJncyxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVzXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+ZXJyb3IgaW5zdGFuY2VvZiBVcGxvYWRUaGluZ0Vycm9yID8gZXJyb3IgOiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBtaWRkbGV3YXJlXCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWV0YWRhdGFbVVRGaWxlc10gJiYgbWV0YWRhdGFbVVRGaWxlc10ubGVuZ3RoICE9PSBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBmaWxlcyBvdmVycmlkZSB0byBoYXZlIHRoZSBzYW1lIGxlbmd0aCBhcyBvcmlnaW5hbCBmaWxlcywgZ290ICR7bWV0YWRhdGFbVVRGaWxlc10ubGVuZ3RofSBidXQgZXhwZWN0ZWQgJHtmaWxlcy5sZW5ndGh9YDtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZpbGVzIG92ZXJyaWRlIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgZmlsZXNcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogbXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdHRhY2ggY3VzdG9tSWRzIGZyb20gbWlkZGxld2FyZSB0byB0aGUgZmlsZXNcbiAgICAgICAgY29uc3QgZmlsZXNXaXRoQ3VzdG9tSWRzID0geWllbGQqIEVmZmVjdC5mb3JFYWNoKGZpbGVzLCAoZmlsZSwgaWR4KT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGhlaXJzID0gbWV0YWRhdGFbVVRGaWxlc10/LltpZHhdO1xuICAgICAgICAgICAgICAgIGlmICh0aGVpcnMgJiYgdGhlaXJzLnNpemUgIT09IGZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJGaWxlIHNpemUgbWlzbWF0Y2guIFJldmVydGluZyB0byBvcmlnaW5hbCBzaXplXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGVpcnM/Lm5hbWUgPz8gZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IHRoZWlycz8uY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogdGhlaXJzPy5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgIGZpbGVzV2l0aEN1c3RvbUlkcyxcbiAgICAgICAgICAgIHByZWZlcnJlZFJlZ2lvbjogbWV0YWRhdGFbVVRSZWdpb25dXG4gICAgICAgIH07XG4gICAgfSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJydW5Sb3V0ZU1pZGRsZXdhcmVcIikpO1xuY29uc3QgaGFuZGxlVXBsb2FkQWN0aW9uID0gKG9wdHMpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuICAgICAgICBjb25zdCB7IHVwbG9hZGFibGUsIGZlUGFja2FnZSwgYmVBZGFwdGVyLCBzbHVnIH0gPSBvcHRzO1xuICAgICAgICBjb25zdCBqc29uID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUJvZHlKc29uKFVwbG9hZEFjdGlvblBheWxvYWQpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgdXBsb2FkIHJlcXVlc3RcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwianNvblwiLCBqc29uKSk7XG4gICAgICAgIC8vIHZhbGlkYXRlIHRoZSBpbnB1dFxuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyB1c2VyIGlucHV0XCIpO1xuICAgICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICB0cnk6ICgpPT5nZXRQYXJzZUZuKHVwbG9hZGFibGUuaW5wdXRQYXJzZXIpKGpzb24uaW5wdXQpLFxuICAgICAgICAgICAgY2F0Y2g6IChlcnJvcik9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJJbnB1dCBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImlucHV0XCIsIHBhcnNlZElucHV0KSk7XG4gICAgICAgIGNvbnN0IHsgbWV0YWRhdGEsIGZpbGVzV2l0aEN1c3RvbUlkcywgcHJlZmVycmVkUmVnaW9uIH0gPSB5aWVsZCogcnVuUm91dGVNaWRkbGV3YXJlKHtcbiAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcGFyc2VkSW5wdXQsXG4gICAgICAgICAgICAgICAgZmlsZXM6IGpzb24uZmlsZXNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGxvYWRhYmxlXG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyByb3V0ZSBjb25maWdcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicm91dGVyQ29uZmlnXCIsIHVwbG9hZGFibGUucm91dGVyQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IHlpZWxkKiBmaWxsSW5wdXRSb3V0ZUNvbmZpZyh1cGxvYWRhYmxlLnJvdXRlckNvbmZpZykucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJJbnZhbGlkUm91dGVDb25maWdcIiwgKGVycik9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZUNvbmZpZ1wiLCBwYXJzZWRDb25maWcpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlc1wiLCBqc29uLmZpbGVzKSk7XG4gICAgICAgIHlpZWxkKiBhc3NlcnRGaWxlc01lZXRDb25maWcoanNvbi5maWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgY29uZmlnOiAke2UuX3RhZ31gLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBcInJlYXNvblwiIGluIGUgPyBlLnJlYXNvbiA6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbGVzIHZhbGlkYXRlZC5cIik7XG4gICAgICAgIGNvbnN0IGZpbGVVcGxvYWRSZXF1ZXN0cyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlc1dpdGhDdXN0b21JZHMsIChmaWxlKT0+RWZmZWN0Lm1hcChtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocGFyc2VkQ29uZmlnKSksICh0eXBlKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSB8fCB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21JZDogZmlsZS5jdXN0b21JZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBwYXJzZWRDb25maWdbdHlwZV0/LmNvbnRlbnREaXNwb3NpdGlvbiA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY2w6IHBhcnNlZENvbmZpZ1t0eXBlXT8uYWNsXG4gICAgICAgICAgICAgICAgfSkpKS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgICAgICAgICAgLyoqIFNob3VsZG4ndCBoYXBwZW4gc2luY2UgY29uZmlnIGlzIHZhbGlkYXRlZCBhYm92ZSBzbyBqdXN0IGR5aW5nIGlzIGZpbmUgSSB0aGluayAqLyBJbnZhbGlkRmlsZVR5cGU6IChlKT0+RWZmZWN0LmRpZShlKSxcbiAgICAgICAgICAgIFVua25vd25GaWxlVHlwZTogKGUpPT5FZmZlY3QuZGllKGUpXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3Qgcm91dGVPcHRpb25zID0gdXBsb2FkYWJsZS5yb3V0ZU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgICAgIGNvbnN0IGluZ2VzdFVybCA9IHlpZWxkKiBJbmdlc3RVcmwocHJlZmVycmVkUmVnaW9uKTtcbiAgICAgICAgY29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkdlbmVyYXRpbmcgcHJlc2lnbmVkIFVSTHNcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZmlsZVVwbG9hZFJlcXVlc3RzXCIsIGZpbGVVcGxvYWRSZXF1ZXN0cyksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJpbmdlc3RVcmxcIiwgaW5nZXN0VXJsKSk7XG4gICAgICAgIGNvbnN0IHByZXNpZ25lZFVybHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZVVwbG9hZFJlcXVlc3RzLCAoZmlsZSk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCwgcm91dGVPcHRpb25zLmdldEZpbGVIYXNoUGFydHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtpbmdlc3RVcmx9LyR7a2V5fWAsIGFwaUtleSwge1xuICAgICAgICAgICAgICAgICAgICB0dGxJblNlY29uZHM6IHJvdXRlT3B0aW9ucy5wcmVzaWduZWRVUkxUVEwsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1pZGVudGlmaWVyXCI6IGFwcElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXV0LWZpbGUtbmFtZVwiOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1zaXplXCI6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1maWxlLXR5cGVcIjogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXV0LXNsdWdcIjogc2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1jdXN0b20taWRcIjogZmlsZS5jdXN0b21JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1jb250ZW50LWRpc3Bvc2l0aW9uXCI6IGZpbGUuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXV0LWFjbFwiOiBmaWxlLmFjbFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksIHtcbiAgICAgICAgICAgIGNvbmN1cnJlbmN5OiBcInVuYm91bmRlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzZXJ2ZXJSZXEgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RVcmwgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QudG9VUkwoc2VydmVyUmVxKTtcbiAgICAgICAgY29uc3QgZGV2SG9va1JlcXVlc3QgPSB5aWVsZCogQ29uZmlnLnN0cmluZyhcImNhbGxiYWNrVXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KHJlcXVlc3RVcmwub3JpZ2luICsgcmVxdWVzdFVybC5wYXRobmFtZSksIEVmZmVjdC5tYXAoKHVybCk9Pkh0dHBDbGllbnRSZXF1ZXN0LnBvc3QodXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmFwcGVuZFVybFBhcmFtKFwic2x1Z1wiLCBzbHVnKSkpKTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGFSZXF1ZXN0ID0gSHR0cENsaWVudFJlcXVlc3QucG9zdChcIi9yb3V0ZS1tZXRhZGF0YVwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuICAgICAgICB9KSwgSHR0cENsaWVudFJlcXVlc3QuYm9keUpzb24oe1xuICAgICAgICAgICAgZmlsZUtleXM6IHByZXNpZ25lZFVybHMubWFwKCh7IGtleSB9KT0+a2V5KSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICAgICAgICAgIGlzRGV2LFxuICAgICAgICAgICAgY2FsbGJhY2tVcmw6IGRldkhvb2tSZXF1ZXN0LnVybCxcbiAgICAgICAgICAgIGNhbGxiYWNrU2x1Zzogc2x1ZyxcbiAgICAgICAgICAgIGF3YWl0U2VydmVyRGF0YTogcm91dGVPcHRpb25zLmF3YWl0U2VydmVyRGF0YSA/PyB0cnVlXG4gICAgICAgIH0pLCBFZmZlY3QuZmxhdE1hcChodHRwQ2xpZW50LmV4ZWN1dGUpKTtcbiAgICAgICAgY29uc3QgaGFuZGxlRGV2U3RyZWFtRXJyb3IgPSBFZmZlY3QuZm4oXCJoYW5kbGVEZXZTdHJlYW1FcnJvclwiKShmdW5jdGlvbiooZXJyLCBjaHVuaykge1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gU2NoZW1hLnBhcnNlSnNvbihTY2hlbWEuU3RydWN0KHtcbiAgICAgICAgICAgICAgICBmaWxlOiBVcGxvYWRlZEZpbGVEYXRhXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRDaHVuayA9IHlpZWxkKiBTY2hlbWEuZGVjb2RlVW5rbm93bihzY2hlbWEpKGNodW5rKTtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHBhcnNlZENodW5rLmZpbGUua2V5O1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkZhaWxlZCB0byBmb3J3YXJkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyh7XG4gICAgICAgICAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaHR0cFJlc3BvbnNlID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QoXCIvY2FsbGJhY2stcmVzdWx0XCIpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChpbmdlc3RVcmwpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuICAgICAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gZm9yd2FyZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgICAgICB9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG4gICAgICAgICAgICB5aWVsZCogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVwb3J0ZWQgY2FsbGJhY2sgZXJyb3IgdG8gVXBsb2FkVGhpbmdcIikoaHR0cFJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFNlbmQgbWV0YWRhdGEgdG8gVVQgc2VydmVyIChub24gYmxvY2tpbmcgYXMgYSBkYWVtb24pXG4gICAgICAgIC8vIEluIGRldiwga2VlcCB0aGUgc3RyZWFtIG9wZW4gYW5kIHNpbXVsYXRlIHRoZSBjYWxsYmFjayByZXF1ZXN0cyBhc1xuICAgICAgICAvLyBmaWxlcyBjb21wbGV0ZSB1cGxvYWRpbmdcbiAgICAgICAgY29uc3QgZmliZXIgPSB5aWVsZCogRWZmZWN0LmlmKGlzRGV2LCB7XG4gICAgICAgICAgICBvblRydWU6ICgpPT5tZXRhZGF0YVJlcXVlc3QucGlwZShFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXhpbjogXCJOb25lXCJcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIG1ldGFkYXRhXCIpXG4gICAgICAgICAgICAgICAgfSksIEh0dHBDbGllbnRSZXNwb25zZS5zdHJlYW0sIGhhbmRsZUpzb25MaW5lU3RyZWFtKE1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0LCAoY2h1bmspPT5kZXZIb29rUmVxdWVzdC5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcnMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cGxvYWR0aGluZy1ob29rXCI6IGNodW5rLmhvb2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCI6IGNodW5rLnNpZ25hdHVyZVxuICAgICAgICAgICAgICAgICAgICB9KSwgSHR0cENsaWVudFJlcXVlc3Quc2V0Qm9keShIdHRwQm9keS50ZXh0KGNodW5rLnBheWxvYWQsIFwiYXBwbGljYXRpb24vanNvblwiKSksIGh0dHBDbGllbnQuZXhlY3V0ZSwgRWZmZWN0LnRhcChsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJTdWNjZXNzZnVsbHkgZm9yd2FyZGVkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtXCIpKSwgRWZmZWN0LmNhdGNoVGFnKFwiUmVzcG9uc2VFcnJvclwiLCAoZXJyKT0+aGFuZGxlRGV2U3RyZWFtRXJyb3IoZXJyLCBjaHVuay5wYXlsb2FkKSksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoY2h1bmspLCBFZmZlY3QuYXNWb2lkLCBFZmZlY3QuaWdub3JlTG9nZ2VkLCBFZmZlY3Quc2NvcGVkKSkpLFxuICAgICAgICAgICAgb25GYWxzZTogKCk9Pm1ldGFkYXRhUmVxdWVzdC5waXBlKEVmZmVjdC50YXBCb3RoKHtcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzOiBsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJSZWdpc3RlcmVkIG1ldGFkYXRhXCIpLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBtZXRhZGF0YVwiKVxuICAgICAgICAgICAgICAgIH0pLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24oTWV0YWRhdGFGZXRjaFJlc3BvbnNlKSksIEVmZmVjdC5zY29wZWQpXG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LmZvcmtEYWVtb24pO1xuICAgICAgICBjb25zdCBwcmVzaWduZWRzID0gcHJlc2lnbmVkVXJscy5tYXAoKHAsIGkpPT4oe1xuICAgICAgICAgICAgICAgIHVybDogcC51cmwsXG4gICAgICAgICAgICAgICAga2V5OiBwLmtleSxcbiAgICAgICAgICAgICAgICBuYW1lOiBmaWxlVXBsb2FkUmVxdWVzdHNbaV0ubmFtZSxcbiAgICAgICAgICAgICAgICBjdXN0b21JZDogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLmN1c3RvbUlkID8/IG51bGxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dJbmZvKFwiU2VuZGluZyBwcmVzaWduZWQgVVJMcyB0byBjbGllbnRcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicHJlc2lnbmVkVXJsc1wiLCBwcmVzaWduZWRzKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib2R5OiBwcmVzaWduZWRzLFxuICAgICAgICAgICAgZmliZXJcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZVVwbG9hZEFjdGlvblwiKSk7XG5cbmV4cG9ydCB7IEFkYXB0ZXJBcmd1bWVudHMsIGNyZWF0ZVJlcXVlc3RIYW5kbGVyLCBtYWtlQWRhcHRlckhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/jsonl.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleJsonLineStream: () => (/* binding */ handleJsonLineStream)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Stream */ \"(rsc)/./node_modules/effect/dist/esm/Stream.js\");\n\n\n\n\nconst handleJsonLineStream = (schema, onChunk)=>(stream)=>{\n        let buf = \"\";\n        return stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_0__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect((chunk)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n                buf += chunk;\n                // Scan buffer for newlines\n                const parts = buf.split(\"\\n\");\n                const validChunks = [];\n                for (const part of parts){\n                    try {\n                        // Attempt to parse chunk as JSON\n                        validChunks.push(JSON.parse(part));\n                        // Advance buffer if parsing succeeded\n                        buf = buf.slice(part.length + 1);\n                    } catch  {\n                    //\n                    }\n                }\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"buf\", buf));\n                return validChunks;\n            })), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach((part)=>onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"handleJsonLineStream\"));\n    };\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvanNvbmwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNMO0FBQ0s7O0FBRXhDO0FBQ0E7QUFDQSwyQkFBMkIscURBQWlCLElBQUksb0RBQWdCLFVBQVUsOENBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1EQUFlLHlCQUF5Qix1REFBbUIsa0JBQWtCLHVEQUFtQiwrQkFBK0IsdURBQW1CO0FBQ3pLO0FBQ0EsYUFBYSxJQUFJLG9EQUFnQixDQUFDLHdEQUFlLENBQUMsZ0RBQU8sWUFBWSxvREFBZ0IsQ0FBQyxrREFBYywwQkFBMEIsbURBQWUsRUFBRSxzREFBa0I7QUFDaks7O0FBRWdDIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxqc29ubC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0ICogYXMgU3RyZWFtIGZyb20gJ2VmZmVjdC9TdHJlYW0nO1xuXG5jb25zdCBoYW5kbGVKc29uTGluZVN0cmVhbSA9IChzY2hlbWEsIG9uQ2h1bmspPT4oc3RyZWFtKT0+e1xuICAgICAgICBsZXQgYnVmID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIHN0cmVhbS5waXBlKFN0cmVhbS5kZWNvZGVUZXh0KCksIFN0cmVhbS5tYXBFZmZlY3QoKGNodW5rKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICAgICAgYnVmICs9IGNodW5rO1xuICAgICAgICAgICAgICAgIC8vIFNjYW4gYnVmZmVyIGZvciBuZXdsaW5lc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYnVmLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkQ2h1bmtzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKXtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgY2h1bmsgYXMgSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRDaHVua3MucHVzaChKU09OLnBhcnNlKHBhcnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgYnVmZmVyIGlmIHBhcnNpbmcgc3VjY2VlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYgPSBidWYuc2xpY2UocGFydC5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAge1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSZWNlaXZlZCBjaHVua3NcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiY2h1bmtcIiwgY2h1bmspLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwicGFyc2VkQ2h1bmtzXCIsIHZhbGlkQ2h1bmtzKSwgRWZmZWN0LmFubm90YXRlTG9ncyhcImJ1ZlwiLCBidWYpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRDaHVua3M7XG4gICAgICAgICAgICB9KSksIFN0cmVhbS5tYXBFZmZlY3QoUy5kZWNvZGVVbmtub3duKFMuQXJyYXkoc2NoZW1hKSkpLCBTdHJlYW0ubWFwRWZmZWN0KEVmZmVjdC5mb3JFYWNoKChwYXJ0KT0+b25DaHVuayhwYXJ0KSkpLCBTdHJlYW0ucnVuRHJhaW4sIEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZUpzb25MaW5lU3RyZWFtXCIpKTtcbiAgICB9O1xuXG5leHBvcnQgeyBoYW5kbGVKc29uTGluZVN0cmVhbSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/logger.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/logger.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogFormat: () => (/* binding */ LogFormat),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   withLogFormat: () => (/* binding */ withLogFormat),\n/* harmony export */   withMinimalLogLevel: () => (/* binding */ withMinimalLogLevel)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_ConfigError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/ConfigError */ \"(rsc)/./node_modules/effect/dist/esm/ConfigError.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Either__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Either */ \"(rsc)/./node_modules/effect/dist/esm/Either.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Config.logLevel counter-intuitively accepts LogLevel[\"label\"]\n * instead of a literal, ripping it and changing to accept literal\n * Effect 4.0 will change this to accept a literal and then we can\n * remove this and go back to the built-in validator.\n */ const ConfigLogLevel = (name)=>{\n    const config = effect_Config__WEBPACK_IMPORTED_MODULE_0__.mapOrFail(effect_Config__WEBPACK_IMPORTED_MODULE_0__.string(), (literal)=>{\n        const level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.allLevels.find((level)=>level._tag === literal);\n        return level === undefined ? effect_Either__WEBPACK_IMPORTED_MODULE_2__.left(effect_ConfigError__WEBPACK_IMPORTED_MODULE_3__.InvalidData([], `Expected a log level but received ${literal}`)) : effect_Either__WEBPACK_IMPORTED_MODULE_2__.right(level);\n    });\n    return name === undefined ? config : effect_Config__WEBPACK_IMPORTED_MODULE_0__.nested(config, name);\n};\nconst withMinimalLogLevel = ConfigLogLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((level)=>effect_Logger__WEBPACK_IMPORTED_MODULE_5__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_7__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_0__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_8__.IsDevelopment;\n    const logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(isDev ? \"pretty\" : \"json\"));\n    return effect_Logger__WEBPACK_IMPORTED_MODULE_5__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_7__.unwrapEffect);\nconst logHttpClientResponse = (message, opts)=>{\n    const mixin = opts?.mixin ?? \"json\";\n    const level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.fromLiteral(opts?.level ?? \"Debug\");\n    return (response)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_4__[\"void\"], ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message)=>(err)=>err._tag === \"ResponseError\" ? logHttpClientResponse(message, {\n            level: \"Error\"\n        })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"error\", err));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ1U7QUFDVjtBQUNBO0FBQ0Y7QUFDRTtBQUNJO0FBQ1c7QUFDWDs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9EQUFnQixDQUFDLGlEQUFhO0FBQ2pELHNCQUFzQixzREFBa0I7QUFDeEMscUNBQXFDLCtDQUFXLENBQUMsMkRBQXVCLDBDQUEwQyxRQUFRLE1BQU0sZ0RBQVk7QUFDNUksS0FBSztBQUNMLHlDQUF5QyxpREFBYTtBQUN0RDtBQUNBLDREQUE0RCxzREFBa0IsQ0FBQyxpREFBYSxHQUFHLGtEQUFjLFVBQVUsMERBQXNCLFVBQVUsbURBQWUsTUFBTSxtREFBZSwyQkFBMkIsdURBQW1CLGdCQUFnQixtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2pUO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0Isa0JBQWtCLGtEQUFjO0FBQ2hDLHNCQUFzQiw4Q0FBVTtBQUNoQyx5QkFBeUIscURBQWE7QUFDdEMsNENBQTRDLHNEQUFrQjtBQUM5RCxXQUFXLDBDQUFNO0FBQ2pCLENBQUMsT0FBTyxtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0I7QUFDQTtBQUNBLGtCQUFrQix3REFBb0I7QUFDdEMsdUJBQXVCLGtEQUFjLHNDQUFzQyxrREFBVyxNQUFNLHVEQUFtQixXQUFXLFNBQVMsR0FBRyxnQkFBZ0IsU0FBUyx1REFBbUI7QUFDbEw7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrQkFBa0IsbURBQWUsZUFBZSx1REFBbUI7O0FBRXdCIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxsb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gJ2VmZmVjdC9Db25maWcnO1xuaW1wb3J0ICogYXMgQ29uZmlnRXJyb3IgZnJvbSAnZWZmZWN0L0NvbmZpZ0Vycm9yJztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCAqIGFzIEVpdGhlciBmcm9tICdlZmZlY3QvRWl0aGVyJztcbmltcG9ydCAqIGFzIExheWVyIGZyb20gJ2VmZmVjdC9MYXllcic7XG5pbXBvcnQgKiBhcyBMb2dnZXIgZnJvbSAnZWZmZWN0L0xvZ2dlcic7XG5pbXBvcnQgKiBhcyBMb2dMZXZlbCBmcm9tICdlZmZlY3QvTG9nTGV2ZWwnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgSXNEZXZlbG9wbWVudCB9IGZyb20gJy4vY29uZmlnLmpzJztcblxuLyoqXG4gKiBDb25maWcubG9nTGV2ZWwgY291bnRlci1pbnR1aXRpdmVseSBhY2NlcHRzIExvZ0xldmVsW1wibGFiZWxcIl1cbiAqIGluc3RlYWQgb2YgYSBsaXRlcmFsLCByaXBwaW5nIGl0IGFuZCBjaGFuZ2luZyB0byBhY2NlcHQgbGl0ZXJhbFxuICogRWZmZWN0IDQuMCB3aWxsIGNoYW5nZSB0aGlzIHRvIGFjY2VwdCBhIGxpdGVyYWwgYW5kIHRoZW4gd2UgY2FuXG4gKiByZW1vdmUgdGhpcyBhbmQgZ28gYmFjayB0byB0aGUgYnVpbHQtaW4gdmFsaWRhdG9yLlxuICovIGNvbnN0IENvbmZpZ0xvZ0xldmVsID0gKG5hbWUpPT57XG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLm1hcE9yRmFpbChDb25maWcuc3RyaW5nKCksIChsaXRlcmFsKT0+e1xuICAgICAgICBjb25zdCBsZXZlbCA9IExvZ0xldmVsLmFsbExldmVscy5maW5kKChsZXZlbCk9PmxldmVsLl90YWcgPT09IGxpdGVyYWwpO1xuICAgICAgICByZXR1cm4gbGV2ZWwgPT09IHVuZGVmaW5lZCA/IEVpdGhlci5sZWZ0KENvbmZpZ0Vycm9yLkludmFsaWREYXRhKFtdLCBgRXhwZWN0ZWQgYSBsb2cgbGV2ZWwgYnV0IHJlY2VpdmVkICR7bGl0ZXJhbH1gKSkgOiBFaXRoZXIucmlnaHQobGV2ZWwpO1xuICAgIH0pO1xuICAgIHJldHVybiBuYW1lID09PSB1bmRlZmluZWQgPyBjb25maWcgOiBDb25maWcubmVzdGVkKGNvbmZpZywgbmFtZSk7XG59O1xuY29uc3Qgd2l0aE1pbmltYWxMb2dMZXZlbCA9IENvbmZpZ0xvZ0xldmVsKFwibG9nTGV2ZWxcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoTG9nTGV2ZWwuSW5mbyksIEVmZmVjdC5hbmRUaGVuKChsZXZlbCk9PkxvZ2dlci5taW5pbXVtTG9nTGV2ZWwobGV2ZWwpKSwgRWZmZWN0LnRhcEVycm9yKChlKT0+RWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBsb2cgbGV2ZWxcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBzZXJ2ZXIgY29uZmlndXJhdGlvblwiLFxuICAgICAgICBjYXVzZTogZVxuICAgIH0pKSwgTGF5ZXIudW53cmFwRWZmZWN0KTtcbmNvbnN0IExvZ0Zvcm1hdCA9IENvbmZpZy5saXRlcmFsKFwianNvblwiLCBcImxvZ0ZtdFwiLCBcInN0cnVjdHVyZWRcIiwgXCJwcmV0dHlcIikoXCJsb2dGb3JtYXRcIik7XG5jb25zdCB3aXRoTG9nRm9ybWF0ID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcbiAgICBjb25zdCBsb2dGb3JtYXQgPSB5aWVsZCogTG9nRm9ybWF0LnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KGlzRGV2ID8gXCJwcmV0dHlcIiA6IFwianNvblwiKSk7XG4gICAgcmV0dXJuIExvZ2dlcltsb2dGb3JtYXRdO1xufSkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNlcnZlciBjb25maWd1cmF0aW9uXCIsXG4gICAgICAgIGNhdXNlOiBlXG4gICAgfSkpLCBMYXllci51bndyYXBFZmZlY3QpO1xuY29uc3QgbG9nSHR0cENsaWVudFJlc3BvbnNlID0gKG1lc3NhZ2UsIG9wdHMpPT57XG4gICAgY29uc3QgbWl4aW4gPSBvcHRzPy5taXhpbiA/PyBcImpzb25cIjtcbiAgICBjb25zdCBsZXZlbCA9IExvZ0xldmVsLmZyb21MaXRlcmFsKG9wdHM/LmxldmVsID8/IFwiRGVidWdcIik7XG4gICAgcmV0dXJuIChyZXNwb25zZSk9PkVmZmVjdC5mbGF0TWFwKG1peGluICE9PSBcIk5vbmVcIiA/IHJlc3BvbnNlW21peGluXSA6IEVmZmVjdC52b2lkLCAoKT0+RWZmZWN0LmxvZ1dpdGhMZXZlbChsZXZlbCwgYCR7bWVzc2FnZX0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyZXNwb25zZVwiLCByZXNwb25zZSkpKTtcbn07XG5jb25zdCBsb2dIdHRwQ2xpZW50RXJyb3IgPSAobWVzc2FnZSk9PihlcnIpPT5lcnIuX3RhZyA9PT0gXCJSZXNwb25zZUVycm9yXCIgPyBsb2dIdHRwQ2xpZW50UmVzcG9uc2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbGV2ZWw6IFwiRXJyb3JcIlxuICAgICAgICB9KShlcnIucmVzcG9uc2UpIDogRWZmZWN0LmxvZ0Vycm9yKG1lc3NhZ2UpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycikpO1xuXG5leHBvcnQgeyBMb2dGb3JtYXQsIGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlLCB3aXRoTG9nRm9ybWF0LCB3aXRoTWluaW1hbExvZ0xldmVsIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/parser.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/parser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ParserError: () => (/* binding */ ParserError),\n/* harmony export */   getParseFn: () => (/* binding */ getParseFn)\n/* harmony export */ });\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Runtime */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n\n\nclass ParserError extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.TaggedError(\"ParserError\") {\n    constructor(...args){\n        super(...args), this.message = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n    }\n}\nfunction getParseFn(parser) {\n    if (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\") {\n        /**\n     * Zod\n     * TODO (next major): Consider wrapping ZodError in ParserError\n     */ return parser.parseAsync;\n    }\n    if (effect_Schema__WEBPACK_IMPORTED_MODULE_1__.isSchema(parser)) {\n        /**\n     * Effect Schema\n     */ return (value)=>effect_Schema__WEBPACK_IMPORTED_MODULE_1__.decodeUnknownPromise(parser)(value).catch((error)=>{\n                throw new ParserError({\n                    cause: effect_Cause__WEBPACK_IMPORTED_MODULE_2__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_3__.FiberFailureCauseId])\n                });\n            });\n    }\n    if (\"~standard\" in parser) {\n        /**\n     * Standard Schema\n     * TODO (next major): Consider moving this to the top of the function\n     */ return async (value)=>{\n            const result = await parser[\"~standard\"].validate(value);\n            if (result.issues) {\n                throw new ParserError({\n                    cause: result.issues\n                });\n            }\n            return result.value;\n        };\n    }\n    throw new Error(\"Invalid parser\");\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzQztBQUNGO0FBQ007QUFDRjs7QUFFeEMsMEJBQTBCLG9EQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBZTtBQUN2QjtBQUNBO0FBQ0Esd0JBQXdCLCtEQUEyQjtBQUNuRDtBQUNBLDJCQUEyQixnREFBWSxPQUFPLCtEQUEyQjtBQUN6RSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUMiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDYXVzZSBmcm9tICdlZmZlY3QvQ2F1c2UnO1xuaW1wb3J0ICogYXMgRGF0YSBmcm9tICdlZmZlY3QvRGF0YSc7XG5pbXBvcnQgKiBhcyBSdW50aW1lIGZyb20gJ2VmZmVjdC9SdW50aW1lJztcbmltcG9ydCAqIGFzIFNjaGVtYSBmcm9tICdlZmZlY3QvU2NoZW1hJztcblxuY2xhc3MgUGFyc2VyRXJyb3IgZXh0ZW5kcyBEYXRhLlRhZ2dlZEVycm9yKFwiUGFyc2VyRXJyb3JcIikge1xuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3Mpe1xuICAgICAgICBzdXBlciguLi5hcmdzKSwgdGhpcy5tZXNzYWdlID0gXCJJbnB1dCB2YWxpZGF0aW9uIGZhaWxlZC4gVGhlIG9yaWdpbmFsIGVycm9yIHdpdGggaXQncyB2YWxpZGF0aW9uIGlzc3VlcyBpcyBpbiB0aGUgZXJyb3IgY2F1c2UuXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UGFyc2VGbihwYXJzZXIpIHtcbiAgICBpZiAoXCJwYXJzZUFzeW5jXCIgaW4gcGFyc2VyICYmIHR5cGVvZiBwYXJzZXIucGFyc2VBc3luYyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8qKlxuICAgICAqIFpvZFxuICAgICAqIFRPRE8gKG5leHQgbWFqb3IpOiBDb25zaWRlciB3cmFwcGluZyBab2RFcnJvciBpbiBQYXJzZXJFcnJvclxuICAgICAqLyByZXR1cm4gcGFyc2VyLnBhcnNlQXN5bmM7XG4gICAgfVxuICAgIGlmIChTY2hlbWEuaXNTY2hlbWEocGFyc2VyKSkge1xuICAgICAgICAvKipcbiAgICAgKiBFZmZlY3QgU2NoZW1hXG4gICAgICovIHJldHVybiAodmFsdWUpPT5TY2hlbWEuZGVjb2RlVW5rbm93blByb21pc2UocGFyc2VyKSh2YWx1ZSkuY2F0Y2goKGVycm9yKT0+e1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBDYXVzZS5zcXVhc2goZXJyb3JbUnVudGltZS5GaWJlckZhaWx1cmVDYXVzZUlkXSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoXCJ+c3RhbmRhcmRcIiBpbiBwYXJzZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICogU3RhbmRhcmQgU2NoZW1hXG4gICAgICogVE9ETyAobmV4dCBtYWpvcik6IENvbnNpZGVyIG1vdmluZyB0aGlzIHRvIHRoZSB0b3Agb2YgdGhlIGZ1bmN0aW9uXG4gICAgICovIHJldHVybiBhc3luYyAodmFsdWUpPT57XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwYXJzZXJbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjYXVzZTogcmVzdWx0Lmlzc3Vlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJzZXJcIik7XG59XG5cbmV4cG9ydCB7IFBhcnNlckVycm9yLCBnZXRQYXJzZUZuIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/route-config.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertFilesMeetConfig: () => (/* binding */ assertFilesMeetConfig),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\n\nclass FileSizeMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, max, actual){\n        const reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n        super({\n            reason\n        }), this._tag = \"FileSizeMismatch\", this.name = \"FileSizeMismatchError\";\n    }\n}\nclass FileCountMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, boundtype, bound, actual){\n        const reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n        super({\n            reason\n        }), this._tag = \"FileCountMismatch\", this.name = \"FileCountMismatchError\";\n    }\n}\n// Verify that the uploaded files doesn't violate the route config,\n// e.g. uploading more videos than allowed, or a file that is larger than allowed.\n// This is double-checked on infra side, but we want to fail early to avoid network latency.\nconst assertFilesMeetConfig = (files, routeConfig)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const counts = {};\n        for (const file of files){\n            const type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n            counts[type] = (counts[type] ?? 0) + 1;\n            const sizeLimit = routeConfig[type]?.maxFileSize;\n            if (!sizeLimit) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n            }\n            const sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n            if (file.size > sizeLimitBytes) {\n                return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n            }\n        }\n        for(const _key in counts){\n            const key = _key;\n            const config = routeConfig[key];\n            if (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n            const count = counts[key];\n            const min = config.minFileCount;\n            const max = config.maxFileCount;\n            if (min > max) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid config during file count - minFileCount > maxFileCount\",\n                    cause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n                });\n            }\n            if (count != null && count < min) {\n                return yield* new FileCountMismatch(key, \"minimum\", min, count);\n            }\n            if (count != null && count > max) {\n                return yield* new FileCountMismatch(key, \"maximum\", max, count);\n            }\n        }\n        return null;\n    });\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config)=>({\n                slug,\n                config\n            })));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcm91dGUtY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDMkg7O0FBRW5LLCtCQUErQiw4Q0FBVTtBQUN6QztBQUNBLHlDQUF5QyxNQUFNLGdCQUFnQixvRUFBZSxTQUFTLG1DQUFtQyxJQUFJO0FBQzlIO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBVTtBQUMxQztBQUNBLHVDQUF1QyxRQUFRLG1CQUFtQixLQUFLLGFBQWEsV0FBVyxtQkFBbUIsTUFBTTtBQUN4SDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsOENBQVU7QUFDOUQ7QUFDQTtBQUNBLGdDQUFnQyxrRUFBYSxPQUFPLCtEQUFVO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3RUFBdUI7QUFDekQ7QUFDQSwwQ0FBMEMsb0VBQWU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsd0VBQXVCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFnQjtBQUNsRDtBQUNBO0FBQ0Esa0ZBQWtGLElBQUksU0FBUyxLQUFLLElBQUksSUFBSTtBQUM1RyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNDQUFzQyxrREFBYyxDQUFDLCtEQUFVLGtCQUFrQiw4Q0FBVSxDQUFDLHlFQUFvQjtBQUNoSDtBQUNBO0FBQ0EsYUFBYTs7QUFFeUMiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHJvdXRlLWNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBEYXRhIGZyb20gJ2VmZmVjdC9EYXRhJztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCB7IG1hdGNoRmlsZVR5cGUsIG9iamVjdEtleXMsIEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yLCBmaWxlU2l6ZVRvQnl0ZXMsIFVwbG9hZFRoaW5nRXJyb3IsIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBieXRlc1RvRmlsZVNpemUgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcblxuY2xhc3MgRmlsZVNpemVNaXNtYXRjaCBleHRlbmRzIERhdGEuRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIG1heCwgYWN0dWFsKXtcbiAgICAgICAgY29uc3QgcmVhc29uID0gYFlvdSB1cGxvYWRlZCBhICR7dHlwZX0gZmlsZSB0aGF0IHdhcyAke2J5dGVzVG9GaWxlU2l6ZShhY3R1YWwpfSwgYnV0IHRoZSBsaW1pdCBmb3IgdGhhdCB0eXBlIGlzICR7bWF4fWA7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIHJlYXNvblxuICAgICAgICB9KSwgdGhpcy5fdGFnID0gXCJGaWxlU2l6ZU1pc21hdGNoXCIsIHRoaXMubmFtZSA9IFwiRmlsZVNpemVNaXNtYXRjaEVycm9yXCI7XG4gICAgfVxufVxuY2xhc3MgRmlsZUNvdW50TWlzbWF0Y2ggZXh0ZW5kcyBEYXRhLkVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBib3VuZHR5cGUsIGJvdW5kLCBhY3R1YWwpe1xuICAgICAgICBjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkICR7YWN0dWFsfSBmaWxlKHMpIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlICR7Ym91bmR0eXBlfSBmb3IgdGhhdCB0eXBlIGlzICR7Ym91bmR9YDtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgcmVhc29uXG4gICAgICAgIH0pLCB0aGlzLl90YWcgPSBcIkZpbGVDb3VudE1pc21hdGNoXCIsIHRoaXMubmFtZSA9IFwiRmlsZUNvdW50TWlzbWF0Y2hFcnJvclwiO1xuICAgIH1cbn1cbi8vIFZlcmlmeSB0aGF0IHRoZSB1cGxvYWRlZCBmaWxlcyBkb2Vzbid0IHZpb2xhdGUgdGhlIHJvdXRlIGNvbmZpZyxcbi8vIGUuZy4gdXBsb2FkaW5nIG1vcmUgdmlkZW9zIHRoYW4gYWxsb3dlZCwgb3IgYSBmaWxlIHRoYXQgaXMgbGFyZ2VyIHRoYW4gYWxsb3dlZC5cbi8vIFRoaXMgaXMgZG91YmxlLWNoZWNrZWQgb24gaW5mcmEgc2lkZSwgYnV0IHdlIHdhbnQgdG8gZmFpbCBlYXJseSB0byBhdm9pZCBuZXR3b3JrIGxhdGVuY3kuXG5jb25zdCBhc3NlcnRGaWxlc01lZXRDb25maWcgPSAoZmlsZXMsIHJvdXRlQ29uZmlnKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpe1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHlpZWxkKiBtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocm91dGVDb25maWcpKTtcbiAgICAgICAgICAgIGNvdW50c1t0eXBlXSA9IChjb3VudHNbdHlwZV0gPz8gMCkgKyAxO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZUxpbWl0ID0gcm91dGVDb25maWdbdHlwZV0/Lm1heEZpbGVTaXplO1xuICAgICAgICAgICAgaWYgKCFzaXplTGltaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcih0eXBlLCBcIm1heEZpbGVTaXplXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2l6ZUxpbWl0Qnl0ZXMgPSB5aWVsZCogZmlsZVNpemVUb0J5dGVzKHNpemVMaW1pdCk7XG4gICAgICAgICAgICBpZiAoZmlsZS5zaXplID4gc2l6ZUxpbWl0Qnl0ZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBGaWxlU2l6ZU1pc21hdGNoKHR5cGUsIHNpemVMaW1pdCwgZmlsZS5zaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IoY29uc3QgX2tleSBpbiBjb3VudHMpe1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gX2tleTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHJvdXRlQ29uZmlnW2tleV07XG4gICAgICAgICAgICBpZiAoIWNvbmZpZykgcmV0dXJuIHlpZWxkKiBuZXcgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3Ioa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gY291bnRzW2tleV07XG4gICAgICAgICAgICBjb25zdCBtaW4gPSBjb25maWcubWluRmlsZUNvdW50O1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gY29uZmlnLm1heEZpbGVDb3VudDtcbiAgICAgICAgICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnIGR1cmluZyBmaWxlIGNvdW50IC0gbWluRmlsZUNvdW50ID4gbWF4RmlsZUNvdW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBgbWluRmlsZUNvdW50IG11c3QgYmUgbGVzcyB0aGFuIG1heEZpbGVDb3VudCBmb3Iga2V5ICR7a2V5fS4gZ290OiAke21pbn0gPiAke21heH1gXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgIT0gbnVsbCAmJiBjb3VudCA8IG1pbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtaW5pbXVtXCIsIG1pbiwgY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvdW50ICE9IG51bGwgJiYgY291bnQgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBGaWxlQ291bnRNaXNtYXRjaChrZXksIFwibWF4aW11bVwiLCBtYXgsIGNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbmNvbnN0IGV4dHJhY3RSb3V0ZXJDb25maWcgPSAocm91dGVyKT0+RWZmZWN0LmZvckVhY2gob2JqZWN0S2V5cyhyb3V0ZXIpLCAoc2x1Zyk9PkVmZmVjdC5tYXAoZmlsbElucHV0Um91dGVDb25maWcocm91dGVyW3NsdWddLnJvdXRlckNvbmZpZyksIChjb25maWcpPT4oe1xuICAgICAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICAgICAgY29uZmlnXG4gICAgICAgICAgICB9KSkpO1xuXG5leHBvcnQgeyBhc3NlcnRGaWxlc01lZXRDb25maWcsIGV4dHJhY3RSb3V0ZXJDb25maWcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/runtime.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/FiberRef */ \"(rsc)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(rsc)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nconst makeRuntime = (fetch, config)=>{\n    const fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provideMerge(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_0__.succeed(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.Fetch, fetch));\n    const withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__.update(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.currentRedactedNames, (_)=>_.concat([\n            \"x-uploadthing-api-key\"\n        ])));\n    const layer = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_0__.mergeAll(_logger_js__WEBPACK_IMPORTED_MODULE_4__.withLogFormat, _logger_js__WEBPACK_IMPORTED_MODULE_4__.withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_0__.setConfigProvider((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.configProvider)(config)));\n    return effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__.make(layer);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE0RDtBQUNoQjtBQUNOO0FBQ2tCO0FBQ1g7QUFDb0I7O0FBRWpFO0FBQ0EsNEJBQTRCLHNEQUFrQixDQUFDLG1EQUFxQixFQUFFLGlEQUFhLENBQUMsbURBQXFCO0FBQ3pHLGdDQUFnQyx1REFBbUIsQ0FBQyxtREFBZSxDQUFDLGtFQUE0QjtBQUNoRztBQUNBO0FBQ0Esa0JBQWtCLGlEQUFhLENBQUMsa0RBQWMsQ0FBQyxxREFBYSxFQUFFLDJEQUFtQix5Q0FBeUMsMkRBQXVCLENBQUMsMERBQWM7QUFDaEssV0FBVyx1REFBbUI7QUFDOUI7O0FBRXVCIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxydW50aW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoSHR0cENsaWVudCwgSGVhZGVycyB9IGZyb20gJ0BlZmZlY3QvcGxhdGZvcm0nO1xuaW1wb3J0ICogYXMgRmliZXJSZWYgZnJvbSAnZWZmZWN0L0ZpYmVyUmVmJztcbmltcG9ydCAqIGFzIExheWVyIGZyb20gJ2VmZmVjdC9MYXllcic7XG5pbXBvcnQgKiBhcyBNYW5hZ2VkUnVudGltZSBmcm9tICdlZmZlY3QvTWFuYWdlZFJ1bnRpbWUnO1xuaW1wb3J0IHsgY29uZmlnUHJvdmlkZXIgfSBmcm9tICcuL2NvbmZpZy5qcyc7XG5pbXBvcnQgeyB3aXRoTG9nRm9ybWF0LCB3aXRoTWluaW1hbExvZ0xldmVsIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuXG5jb25zdCBtYWtlUnVudGltZSA9IChmZXRjaCwgY29uZmlnKT0+e1xuICAgIGNvbnN0IGZldGNoSHR0cENsaWVudCA9IExheWVyLnByb3ZpZGVNZXJnZShGZXRjaEh0dHBDbGllbnQubGF5ZXIsIExheWVyLnN1Y2NlZWQoRmV0Y2hIdHRwQ2xpZW50LkZldGNoLCBmZXRjaCkpO1xuICAgIGNvbnN0IHdpdGhSZWRhY3RlZEhlYWRlcnMgPSBMYXllci5lZmZlY3REaXNjYXJkKEZpYmVyUmVmLnVwZGF0ZShIZWFkZXJzLmN1cnJlbnRSZWRhY3RlZE5hbWVzLCAoXyk9Pl8uY29uY2F0KFtcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCJcbiAgICAgICAgXSkpKTtcbiAgICBjb25zdCBsYXllciA9IExheWVyLnByb3ZpZGUoTGF5ZXIubWVyZ2VBbGwod2l0aExvZ0Zvcm1hdCwgd2l0aE1pbmltYWxMb2dMZXZlbCwgZmV0Y2hIdHRwQ2xpZW50LCB3aXRoUmVkYWN0ZWRIZWFkZXJzKSwgTGF5ZXIuc2V0Q29uZmlnUHJvdmlkZXIoY29uZmlnUHJvdmlkZXIoY29uZmlnKSkpO1xuICAgIHJldHVybiBNYW5hZ2VkUnVudGltZS5tYWtlKGxheWVyKTtcbn07XG5cbmV4cG9ydCB7IG1ha2VSdW50aW1lIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/shared-schemas.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACLSchema: () => (/* binding */ ACLSchema),\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   ContentDispositionSchema: () => (/* binding */ ContentDispositionSchema),\n/* harmony export */   FileUploadData: () => (/* binding */ FileUploadData),\n/* harmony export */   FileUploadDataWithCustomId: () => (/* binding */ FileUploadDataWithCustomId),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   NewPresignedUrl: () => (/* binding */ NewPresignedUrl),\n/* harmony export */   ParsedToken: () => (/* binding */ ParsedToken),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n * Valid options for the `?actionType` query param\n */ const ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n * Valid options for the `uploadthing-hook` header\n * for requests coming from UT server\n */ const UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n * =============================================================================\n * =========================== Configuration ===================================\n * =============================================================================\n */ const DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n    decode: (data)=>new TextDecoder().decode(data),\n    encode: (data)=>new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    apiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n    appId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    regions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    ingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({\n        default: ()=>\"ingest.uploadthing.com\"\n    }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n * =============================================================================\n * ======================== File Type Hierarchy ===============================\n * =============================================================================\n */ /**\n * Properties from the web File object, this is what the client sends when initiating an upload\n */ class FileUploadData extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    size: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n    type: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    lastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {\n}\n/**\n * `.middleware()` can add a customId to the incoming file data\n */ class FileUploadDataWithCustomId extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String)\n}) {\n}\n/**\n * When files are uploaded, we get back\n * - a key\n * - URLs for the file\n * - the hash (md5-hex) of the uploaded file's contents\n */ class UploadedFileData extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ appUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    fileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\n/**\n * =============================================================================\n * ======================== Server Response Schemas ============================\n * =============================================================================\n */ class NewPresignedUrl extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"NewPresignedUrl\")({\n    url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\nclass MetadataFetchStreamPart extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n    payload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    signature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    hook: UploadThingHook\n}) {\n}\nclass MetadataFetchResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\nclass CallbackResultResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\n/**\n * =============================================================================\n * ======================== Client Action Payloads ============================\n * =============================================================================\n */ class UploadActionPayload extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n    files: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n    input: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvc2hhcmVkLXNjaGVtYXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUN1Qzs7QUFFMUUsaUNBQWlDLGtEQUFTLElBQUkseUVBQXdCO0FBQ3RFLGtCQUFrQixrREFBUyxJQUFJLDBEQUFTO0FBQ3hDO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFXLENBQUMsNkRBQW9CLEVBQUUsaURBQVE7QUFDbkU7QUFDQTtBQUNBLENBQUM7QUFDRCxvQkFBb0IsaURBQVE7QUFDNUIsWUFBWSxtREFBVSxDQUFDLGlEQUFRLE1BQU0scURBQVk7QUFDakQsV0FBVyxpREFBUTtBQUNuQixhQUFhLHdEQUFlLENBQUMsaURBQVE7QUFDckMsZ0JBQWdCLGlEQUFRLE1BQU0sdURBQWM7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELHlCQUF5QiwrREFBc0IsTUFBTSxrREFBUyxnQkFBZ0Isa0RBQVMsQ0FBQyxvREFBVztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0RBQU87QUFDeEMsVUFBVSxpREFBUTtBQUNsQixVQUFVLGlEQUFRO0FBQ2xCLFVBQVUsaURBQVE7QUFDbEIsa0JBQWtCLGlEQUFRLE1BQU0sbURBQVU7QUFDMUMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGlEQUFRO0FBQ3RCLFlBQVksaURBQVE7QUFDcEIsY0FBYyxpREFBUTtBQUN0QixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnREFBTztBQUN6QyxTQUFTLGlEQUFRO0FBQ2pCLFNBQVMsaURBQVE7QUFDakIsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLFVBQVUsaURBQVE7QUFDbEIsQ0FBQztBQUNEO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLGFBQWEsaURBQVE7QUFDckIsZUFBZSxpREFBUTtBQUN2QjtBQUNBLENBQUM7QUFDRDtBQUNBLG9DQUFvQyxnREFBTztBQUMzQyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBLHFDQUFxQyxnREFBTztBQUM1QyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLFdBQVcsZ0RBQU87QUFDbEIsV0FBVyxrREFBUztBQUNwQixDQUFDO0FBQ0Q7O0FBRXVSIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcZGlzdFxcX2ludGVybmFsXFxzaGFyZWQtc2NoZW1hcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBTIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0IHsgVmFsaWRDb250ZW50RGlzcG9zaXRpb25zLCBWYWxpZEFDTHMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcblxuY29uc3QgQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hID0gUy5MaXRlcmFsKC4uLlZhbGlkQ29udGVudERpc3Bvc2l0aW9ucyk7XG5jb25zdCBBQ0xTY2hlbWEgPSBTLkxpdGVyYWwoLi4uVmFsaWRBQ0xzKTtcbi8qKlxuICogVmFsaWQgb3B0aW9ucyBmb3IgdGhlIGA/YWN0aW9uVHlwZWAgcXVlcnkgcGFyYW1cbiAqLyBjb25zdCBBY3Rpb25UeXBlID0gUy5MaXRlcmFsKFwidXBsb2FkXCIpO1xuLyoqXG4gKiBWYWxpZCBvcHRpb25zIGZvciB0aGUgYHVwbG9hZHRoaW5nLWhvb2tgIGhlYWRlclxuICogZm9yIHJlcXVlc3RzIGNvbWluZyBmcm9tIFVUIHNlcnZlclxuICovIGNvbnN0IFVwbG9hZFRoaW5nSG9vayA9IFMuTGl0ZXJhbChcImNhbGxiYWNrXCIsIFwiZXJyb3JcIik7XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ29uZmlndXJhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjb25zdCBEZWNvZGVTdHJpbmcgPSBTLnRyYW5zZm9ybShTLlVpbnQ4QXJyYXlGcm9tU2VsZiwgUy5TdHJpbmcsIHtcbiAgICBkZWNvZGU6IChkYXRhKT0+bmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRhdGEpLFxuICAgIGVuY29kZTogKGRhdGEpPT5uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZGF0YSlcbn0pO1xuY29uc3QgUGFyc2VkVG9rZW4gPSBTLlN0cnVjdCh7XG4gICAgYXBpS2V5OiBTLlJlZGFjdGVkKFMuU3RyaW5nLnBpcGUoUy5zdGFydHNXaXRoKFwic2tfXCIpKSksXG4gICAgYXBwSWQ6IFMuU3RyaW5nLFxuICAgIHJlZ2lvbnM6IFMuTm9uRW1wdHlBcnJheShTLlN0cmluZyksXG4gICAgaW5nZXN0SG9zdDogUy5TdHJpbmcucGlwZShTLm9wdGlvbmFsV2l0aCh7XG4gICAgICAgIGRlZmF1bHQ6ICgpPT5cImluZ2VzdC51cGxvYWR0aGluZy5jb21cIlxuICAgIH0pKVxufSk7XG5jb25zdCBVcGxvYWRUaGluZ1Rva2VuID0gUy5VaW50OEFycmF5RnJvbUJhc2U2NC5waXBlKFMuY29tcG9zZShEZWNvZGVTdHJpbmcpLCBTLmNvbXBvc2UoUy5wYXJzZUpzb24oUGFyc2VkVG9rZW4pKSk7XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT0gRmlsZSBUeXBlIEhpZXJhcmNoeSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIC8qKlxuICogUHJvcGVydGllcyBmcm9tIHRoZSB3ZWIgRmlsZSBvYmplY3QsIHRoaXMgaXMgd2hhdCB0aGUgY2xpZW50IHNlbmRzIHdoZW4gaW5pdGlhdGluZyBhbiB1cGxvYWRcbiAqLyBjbGFzcyBGaWxlVXBsb2FkRGF0YSBleHRlbmRzIFMuQ2xhc3MoXCJGaWxlVXBsb2FkRGF0YVwiKSh7XG4gICAgbmFtZTogUy5TdHJpbmcsXG4gICAgc2l6ZTogUy5OdW1iZXIsXG4gICAgdHlwZTogUy5TdHJpbmcsXG4gICAgbGFzdE1vZGlmaWVkOiBTLk51bWJlci5waXBlKFMub3B0aW9uYWwpXG59KSB7XG59XG4vKipcbiAqIGAubWlkZGxld2FyZSgpYCBjYW4gYWRkIGEgY3VzdG9tSWQgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YVxuICovIGNsYXNzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkIGV4dGVuZHMgRmlsZVVwbG9hZERhdGEuZXh0ZW5kKFwiRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWRcIikoe1xuICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZylcbn0pIHtcbn1cbi8qKlxuICogV2hlbiBmaWxlcyBhcmUgdXBsb2FkZWQsIHdlIGdldCBiYWNrXG4gKiAtIGEga2V5XG4gKiAtIFVSTHMgZm9yIHRoZSBmaWxlXG4gKiAtIHRoZSBoYXNoIChtZDUtaGV4KSBvZiB0aGUgdXBsb2FkZWQgZmlsZSdzIGNvbnRlbnRzXG4gKi8gY2xhc3MgVXBsb2FkZWRGaWxlRGF0YSBleHRlbmRzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkLmV4dGVuZChcIlVwbG9hZGVkRmlsZURhdGFcIikoe1xuICAgIGtleTogUy5TdHJpbmcsXG4gICAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIFRoaXMgZmllbGQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYHVmc1VybGAgaW5zdGVhZC5cbiAgICovIHVybDogUy5TdHJpbmcsXG4gICAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIFRoaXMgZmllbGQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYHVmc1VybGAgaW5zdGVhZC5cbiAgICovIGFwcFVybDogUy5TdHJpbmcsXG4gICAgdWZzVXJsOiBTLlN0cmluZyxcbiAgICBmaWxlSGFzaDogUy5TdHJpbmdcbn0pIHtcbn1cbi8qKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PSBTZXJ2ZXIgUmVzcG9uc2UgU2NoZW1hcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIGNsYXNzIE5ld1ByZXNpZ25lZFVybCBleHRlbmRzIFMuQ2xhc3MoXCJOZXdQcmVzaWduZWRVcmxcIikoe1xuICAgIHVybDogUy5TdHJpbmcsXG4gICAga2V5OiBTLlN0cmluZyxcbiAgICBjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpLFxuICAgIG5hbWU6IFMuU3RyaW5nXG59KSB7XG59XG5jbGFzcyBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCBleHRlbmRzIFMuQ2xhc3MoXCJNZXRhZGF0YUZldGNoU3RyZWFtUGFydFwiKSh7XG4gICAgcGF5bG9hZDogUy5TdHJpbmcsXG4gICAgc2lnbmF0dXJlOiBTLlN0cmluZyxcbiAgICBob29rOiBVcGxvYWRUaGluZ0hvb2tcbn0pIHtcbn1cbmNsYXNzIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJNZXRhZGF0YUZldGNoUmVzcG9uc2VcIikoe1xuICAgIG9rOiBTLkJvb2xlYW5cbn0pIHtcbn1cbmNsYXNzIENhbGxiYWNrUmVzdWx0UmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiQ2FsbGJhY2tSZXN1bHRSZXNwb25zZVwiKSh7XG4gICAgb2s6IFMuQm9vbGVhblxufSkge1xufVxuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IENsaWVudCBBY3Rpb24gUGF5bG9hZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjbGFzcyBVcGxvYWRBY3Rpb25QYXlsb2FkIGV4dGVuZHMgUy5DbGFzcyhcIlVwbG9hZEFjdGlvblBheWxvYWRcIikoe1xuICAgIGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhKSxcbiAgICBpbnB1dDogUy5Vbmtub3duXG59KSB7XG59XG5cbmV4cG9ydCB7IEFDTFNjaGVtYSwgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hLCBGaWxlVXBsb2FkRGF0YSwgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQsIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIE5ld1ByZXNpZ25lZFVybCwgUGFyc2VkVG9rZW4sIFVwbG9hZEFjdGlvblBheWxvYWQsIFVwbG9hZFRoaW5nSG9vaywgVXBsb2FkVGhpbmdUb2tlbiwgVXBsb2FkZWRGaWxlRGF0YSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles),\n/* harmony export */   UTRegion: () => (/* binding */ UTRegion)\n/* harmony export */ });\n/**\n * Marker used to select the region based on the incoming request\n */ const UTRegion = Symbol(\"uploadthing-region-symbol\");\n/**\n * Marker used to append a `customId` to the incoming file data in `.middleware()`\n * @example\n * ```ts\n * .middleware((opts) => {\n *   return {\n *     [UTFiles]: opts.files.map((file) => ({\n *       ...file,\n *       customId: generateId(),\n *     }))\n *   };\n * })\n * ```\n */ const UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFNkIiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHR5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFya2VyIHVzZWQgdG8gc2VsZWN0IHRoZSByZWdpb24gYmFzZWQgb24gdGhlIGluY29taW5nIHJlcXVlc3RcbiAqLyBjb25zdCBVVFJlZ2lvbiA9IFN5bWJvbChcInVwbG9hZHRoaW5nLXJlZ2lvbi1zeW1ib2xcIik7XG4vKipcbiAqIE1hcmtlciB1c2VkIHRvIGFwcGVuZCBhIGBjdXN0b21JZGAgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YSBpbiBgLm1pZGRsZXdhcmUoKWBcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLm1pZGRsZXdhcmUoKG9wdHMpID0+IHtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBbVVRGaWxlc106IG9wdHMuZmlsZXMubWFwKChmaWxlKSA9PiAoe1xuICogICAgICAgLi4uZmlsZSxcbiAqICAgICAgIGN1c3RvbUlkOiBnZW5lcmF0ZUlkKCksXG4gKiAgICAgfSkpXG4gKiAgIH07XG4gKiB9KVxuICogYGBgXG4gKi8gY29uc3QgVVRGaWxlcyA9IFN5bWJvbChcInVwbG9hZHRoaW5nLWN1c3RvbS1pZC1zeW1ib2xcIik7XG5cbmV4cG9ydCB7IFVURmlsZXMsIFVUUmVnaW9uIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-builder.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder)\n/* harmony export */ });\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n\n\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        $types: {},\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        routeOptions: {\n            awaitServerData: true\n        },\n        inputParser: {\n            parseAsync: ()=>Promise.resolve(undefined),\n            _input: undefined,\n            _output: undefined\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>{\n        // noop\n        },\n        onUploadComplete: ()=>undefined,\n        errorFormatter: initDef.errorFormatter ?? _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__.defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                ..._def,\n                onUploadComplete: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\n/**\n * Create a builder for your backend adapter.\n * Refer to the existing adapters for examples on how to use this function.\n * @public\n *\n * @param opts - Options for the builder\n * @returns A file route builder for making UploadThing file routes\n */ function createBuilder(opts) {\n    return (input, config)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            routeOptions: config ?? {},\n            ...opts\n        });\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkQ7O0FBRTdELDJDQUEyQztBQUMzQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrREFBa0Qsc0VBQXFCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFeUIiLCJzb3VyY2VzIjpbIkQ6XFx0ZW1wXFxZb3VUdWJlXFxub2RlX21vZHVsZXNcXHVwbG9hZHRoaW5nXFxkaXN0XFxfaW50ZXJuYWxcXHVwbG9hZC1idWlsZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRFcnJvckZvcm1hdHRlciB9IGZyb20gJy4vZXJyb3ItZm9ybWF0dGVyLmpzJztcblxuZnVuY3Rpb24gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKGluaXREZWYgPSB7fSkge1xuICAgIGNvbnN0IF9kZWYgPSB7XG4gICAgICAgICR0eXBlczoge30sXG4gICAgICAgIC8vIERlZmF1bHQgcm91dGVyIGNvbmZpZ1xuICAgICAgICByb3V0ZXJDb25maWc6IHtcbiAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IFwiNE1CXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcm91dGVPcHRpb25zOiB7XG4gICAgICAgICAgICBhd2FpdFNlcnZlckRhdGE6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgaW5wdXRQYXJzZXI6IHtcbiAgICAgICAgICAgIHBhcnNlQXN5bmM6ICgpPT5Qcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSxcbiAgICAgICAgICAgIF9pbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgX291dHB1dDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmU6ICgpPT4oe30pLFxuICAgICAgICBvblVwbG9hZEVycm9yOiAoKT0+e1xuICAgICAgICAvLyBub29wXG4gICAgICAgIH0sXG4gICAgICAgIG9uVXBsb2FkQ29tcGxldGU6ICgpPT51bmRlZmluZWQsXG4gICAgICAgIGVycm9yRm9ybWF0dGVyOiBpbml0RGVmLmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcixcbiAgICAgICAgLy8gT3ZlcmxvYWQgd2l0aCBwcm9wZXJ0aWVzIHBhc3NlZCBpblxuICAgICAgICAuLi5pbml0RGVmXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnB1dCAodXNlclBhcnNlcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBpbnB1dFBhcnNlcjogdXNlclBhcnNlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmUgKHVzZXJNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGxvYWRDb21wbGV0ZSAodXNlclVwbG9hZENvbXBsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLl9kZWYsXG4gICAgICAgICAgICAgICAgb25VcGxvYWRDb21wbGV0ZTogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZEVycm9yICh1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBidWlsZGVyIGZvciB5b3VyIGJhY2tlbmQgYWRhcHRlci5cbiAqIFJlZmVyIHRvIHRoZSBleGlzdGluZyBhZGFwdGVycyBmb3IgZXhhbXBsZXMgb24gaG93IHRvIHVzZSB0aGlzIGZ1bmN0aW9uLlxuICogQHB1YmxpY1xuICpcbiAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgdGhlIGJ1aWxkZXJcbiAqIEByZXR1cm5zIEEgZmlsZSByb3V0ZSBidWlsZGVyIGZvciBtYWtpbmcgVXBsb2FkVGhpbmcgZmlsZSByb3V0ZXNcbiAqLyBmdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMpIHtcbiAgICByZXR1cm4gKGlucHV0LCBjb25maWcpPT57XG4gICAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAgICAgcm91dGVyQ29uZmlnOiBpbnB1dCxcbiAgICAgICAgICAgIHJvdXRlT3B0aW9uczogY29uZmlnID8/IHt9LFxuICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgeyBjcmVhdGVCdWlsZGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-server.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uploadWithoutProgress: () => (/* binding */ uploadWithoutProgress)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Function */ \"(rsc)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nvar version = \"7.7.2\";\n\nconst uploadWithoutProgress = (file, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_0__.gen(function*() {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_1__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.filterStatusOk);\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_2__.put(presigned.url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_2__.bodyFormData(formData), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"x-uploadthing-version\", version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_0__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_3__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                cause: e\n            })), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen((_)=>_.json), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_5__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.scoped);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_0__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_0__.annotateLogs(\"json\", json));\n        return {\n            ...json,\n            get url () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.url;\n            },\n            get appUrl () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.appUrl;\n            }\n        };\n    });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpRTtBQUN6QjtBQUNPO0FBQ1E7QUFDRztBQUNUOztBQUVqRDs7QUFFQSxpREFBaUQsOENBQVU7QUFDM0Q7QUFDQTtBQUNBLG1DQUFtQyx3REFBcUIsT0FBTyw0REFBeUI7QUFDeEYsNEJBQTRCLGlEQUFxQixxQkFBcUIsMERBQThCLFlBQVksdURBQTJCLHVCQUF1Qix1REFBMkIsd0RBQXdELG1EQUFlLENBQUMsOERBQWtCLDRCQUE0QixtREFBZSxVQUFVLGlFQUFnQjtBQUM1VjtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUksa0RBQWMsZUFBZSxrREFBYyxDQUFDLHlEQUFZLEdBQUcsaURBQWE7QUFDekYsZUFBZSxtREFBZSxTQUFTLFdBQVcsNkJBQTZCLHVEQUFtQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUVBQXFCO0FBQ3JDO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0JBQWdCLHVFQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUU0QiIsInNvdXJjZXMiOlsiRDpcXHRlbXBcXFlvdVR1YmVcXG5vZGVfbW9kdWxlc1xcdXBsb2FkdGhpbmdcXGRpc3RcXF9pbnRlcm5hbFxcdXBsb2FkLXNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50UmVxdWVzdCB9IGZyb20gJ0BlZmZlY3QvcGxhdGZvcm0nO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0IHsgdW5zYWZlQ29lcmNlIH0gZnJvbSAnZWZmZWN0L0Z1bmN0aW9uJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gJy4vZGVwcmVjYXRpb25zLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRFcnJvciB9IGZyb20gJy4vbG9nZ2VyLmpzJztcblxudmFyIHZlcnNpb24gPSBcIjcuNy4yXCI7XG5cbmNvbnN0IHVwbG9hZFdpdGhvdXRQcm9ncmVzcyA9IChmaWxlLCBwcmVzaWduZWQpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcbiAgICAgICAgY29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuICAgICAgICBjb25zdCBqc29uID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnB1dChwcmVzaWduZWQudXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlGb3JtRGF0YShmb3JtRGF0YSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIlJhbmdlXCIsIFwiYnl0ZXM9MC1cIiksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiLCB2ZXJzaW9uKSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwRXJyb3IobG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIpKSwgRWZmZWN0Lm1hcEVycm9yKChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgIH0pKSwgRWZmZWN0LmFuZFRoZW4oKF8pPT5fLmpzb24pLCBFZmZlY3QuYW5kVGhlbih1bnNhZmVDb2VyY2UpLCBFZmZlY3Quc2NvcGVkKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgRmlsZSAke2ZpbGUubmFtZX0gdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5YCkucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwianNvblwiLCBqc29uKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5qc29uLFxuICAgICAgICAgICAgZ2V0IHVybCAoKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBqc29uLnVybDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgYXBwVXJsICgpIHtcbiAgICAgICAgICAgICAgICBsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS5hcHBVcmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb24uYXBwVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG5leHBvcnQgeyB1cGxvYWRXaXRob3V0UHJvZ3Jlc3MgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_3__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError),\n/* harmony export */   createBuilder: () => (/* reexport safe */ _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__.createBuilder),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_3__.UTRegion),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig),\n/* harmony export */   makeAdapterHandler: () => (/* reexport safe */ _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__.makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/_internal/handler.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\");\n/* harmony import */ var _dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../dist/_internal/route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dist/_internal/upload-builder.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\");\n/* harmony import */ var _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dist/_internal/types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effect/Array */ \"(rsc)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dist/_internal/config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../dist/_internal/logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../dist/_internal/runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Predicate */ \"(rsc)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dist/_internal/upload-server.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n * similar to the built-in File class from Node > 20.\n */ class UTFile extends Blob {\n    constructor(parts, name, options){\n        const optionsWithDefaults = {\n            ...options,\n            type: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_4__.lookup)(name) || \"application/octet-stream\"),\n            lastModified: options?.lastModified ?? Date.now()\n        };\n        super(parts, optionsWithDefaults);\n        this.name = name;\n        this.customId = optionsWithDefaults.customId;\n        this.lastModified = optionsWithDefaults.lastModified;\n    }\n}\n\nfunction guardServerOnly() {\n    if (typeof window !== \"undefined\") {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"The `utapi` can only be used on the server.\"\n        });\n    }\n}\nconst downloadFile = (_url)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        let url = effect_Predicate__WEBPACK_IMPORTED_MODULE_6__.isRecord(_url) ? _url.url : _url;\n        if (typeof url === \"string\") {\n            // since dataurls will result in name being too long, tell the user\n            // to use uploadFiles instead.\n            if (url.startsWith(\"data:\")) {\n                return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                    code: \"BAD_REQUEST\",\n                    message: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n                    data: undefined\n                });\n            }\n        }\n        url = new URL(url);\n        const { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = undefined } = effect_Predicate__WEBPACK_IMPORTED_MODULE_6__.isRecord(_url) ? _url : {};\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.filterStatusOk);\n        const arrayBuffer = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.get(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_8__.modify({\n            headers: {}\n        }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap((_)=>_.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.mapError((cause)=>{\n            return {\n                code: \"BAD_REQUEST\",\n                message: `Failed to download requested file: ${cause.message}`,\n                data: cause.toJSON()\n            };\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n        return new UTFile([\n            arrayBuffer\n        ], name, {\n            customId,\n            lastModified: Date.now()\n        });\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n        const baseUrl = yield* (0,_dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.IngestUrl)(undefined);\n        const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateKey)(file, appId);\n        const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, {\n            // ttlInSeconds: routeOptions.presignedURLTTL,\n            data: {\n                \"x-ut-identifier\": appId,\n                \"x-ut-file-name\": file.name,\n                \"x-ut-file-size\": file.size,\n                \"x-ut-file-type\": file.type,\n                \"x-ut-custom-id\": file.customId,\n                \"x-ut-content-disposition\": cd,\n                \"x-ut-acl\": acl\n            }\n        });\n        return {\n            url,\n            key\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        const presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: \"Failed to generate presigned URL\"\n            })));\n        const response = yield* (0,_dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_10__.uploadWithoutProgress)(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ResponseError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                data: e.toJSON()\n            })));\n        return {\n            key: presigned.key,\n            url: response.url,\n            appUrl: response.appUrl,\n            ufsUrl: response.ufsUrl,\n            lastModified: file.lastModified ?? Date.now(),\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            customId: file.customId ?? null,\n            fileHash: response.fileHash\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFile\"));\n\nclass UTApi {\n    constructor(options){\n        this.requestUploadThing = (pathname, body, responseSchema)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(this, function*() {\n                const { apiKey } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n                const baseUrl = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.ApiUrl;\n                const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.filterStatusOk);\n                return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.post(pathname).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_8__.prependUrl(baseUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_8__.bodyUnsafeJson(body), _effect_platform__WEBPACK_IMPORTED_MODULE_8__.setHeaders({\n                    \"x-uploadthing-version\": _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UPLOADTHING_VERSION,\n                    \"x-uploadthing-be-adapter\": \"server-sdk\",\n                    \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_11__.value(apiKey)\n                }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n                    onSuccess: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__.logHttpClientResponse)(\"UploadThing API Response\"),\n                    onFailure: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__.logHttpClientError)(\"Failed to request UploadThing API\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_13__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"utapi.#requestUploadThing\"));\n        this.executeAsync = async (program, signal)=>{\n            const exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"utapi.#executeAsync\"), (e)=>this.runtime.runPromiseExit(e, signal ? {\n                    signal\n                } : undefined));\n            if (exit._tag === \"Failure\") {\n                throw effect_Cause__WEBPACK_IMPORTED_MODULE_14__.squash(exit.cause);\n            }\n            return exit.value;\n        };\n        /**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   *\n   * @example\n   * await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n   */ this.deleteFiles = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"DeleteFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean,\n                deletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"deleteFiles\")));\n        };\n        /**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   *\n   * @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n   */ this.getFileUrls = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetFileUrlResponse\")({\n                data: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    url: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getFileUrls\")));\n        };\n        /**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ this.listFiles = async (opts)=>{\n            guardServerOnly();\n            class ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"ListFileResponse\")({\n                hasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean,\n                files: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                    id: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String),\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    name: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    size: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                    status: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n                    uploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", {\n                ...opts\n            }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"listFiles\")));\n        };\n        this.renameFiles = async (updates)=>{\n            guardServerOnly();\n            class RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"RenameFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", {\n                updates: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(updates)\n            }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"renameFiles\")));\n        };\n        this.getUsageInfo = async ()=>{\n            guardServerOnly();\n            class GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetUsageInfoResponse\")({\n                totalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                appTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                filesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                limitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getUsageInfo\")));\n        };\n        /**\n   * Generate a presigned url for a private file\n   * Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n   * and is the recommended way to generate a presigned url for a private file.\n   **/ this.generateSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n                const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n                const ufsHost = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UfsHost;\n                const proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n                const ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${proto}://${appId}.${ufsHost}/f/${key}`, apiKey, {\n                    ttlInSeconds: expiresIn\n                });\n                return {\n                    ufsUrl\n                };\n            });\n            return await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"generateSignedURL\")));\n        };\n        /**\n   * Request a presigned url for a private file(s)\n   * @remarks This method is no longer recommended as it makes a fetch\n   * request to the UploadThing API which incurs redundant latency. It\n   * will be deprecated in UploadThing v8 and removed in UploadThing v9.\n   *\n   * @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n   **/ this.getSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts.expiresIn) : undefined;\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn && expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            class GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetSignedUrlResponse\")({\n                url: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n                fileKey: key,\n                expiresIn\n            } : {\n                customId: key,\n                expiresIn\n            }, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getSignedURL\")));\n        };\n        /**\n   * Update the ACL of a file or set of files.\n   *\n   * @example\n   * // Make a single file public\n   * await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n   *\n   * // Make multiple files private\n   * await utapi.updateACL(\n   *   [\n   *     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n   *   ],\n   *   \"private\",\n   * );\n   */ this.updateACL = async (keys, acl, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            const updates = effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys).map((key)=>{\n                return keyType === \"fileKey\" ? {\n                    fileKey: key,\n                    acl\n                } : {\n                    customId: key,\n                    acl\n                };\n            });\n            const responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean\n            });\n            return await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", {\n                updates\n            }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"updateACL\")));\n        };\n        // Assert some stuff\n        guardServerOnly();\n        this.opts = options ?? {};\n        this.fetch = this.opts.fetch ?? globalThis.fetch;\n        this.defaultKeyType = this.opts.defaultKeyType ?? \"fileKey\";\n        this.runtime = (0,_dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_17__.makeRuntime)(this.fetch, this.opts);\n    }\n    uploadFiles(files, opts) {\n        guardServerOnly();\n        const concurrency = opts?.concurrency ?? 1;\n        if (concurrency < 1 || concurrency > 25) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"concurrency must be a positive integer between 1 and 25\"\n            });\n        }\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(files), (file)=>uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            })), {\n            concurrency\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((ups)=>Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFiles\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n    uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const concurrency = opts?.concurrency ?? 1;\n        if (concurrency < 1 || concurrency > 25) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"concurrency must be a positive integer between 1 and 25\"\n            });\n        }\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(urls), (url)=>downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap((file)=>uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            })), {\n            concurrency\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((ups)=>Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFilesFromUrl\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n}\n\nconst createUploadthing = (opts)=>(0,_dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__.createBuilder)(opts);\nconst createRouteHandler = (opts)=>{\n    return (0,_dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__.makeAdapterHandler)((ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed({\n            req: \"request\" in ev ? ev.request : ev\n        }), (ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.runSync((0,_dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__.extractRouterConfig)(router));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ21FO0FBQ3BEO0FBQ1c7QUFDQTtBQUMrQjtBQUM3QjtBQUNBO0FBQ29CO0FBQ0g7QUFDakQ7QUFDRTtBQUNNO0FBQ1Q7QUFDb0U7QUFDZjtBQUM3QjtBQUNWO0FBQ0g7QUFDNkI7O0FBRTNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLCtEQUFNO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixpRUFBZ0I7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLDhDQUFVO0FBQ3ZDLGtCQUFrQixzREFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVc7QUFDekM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtRkFBbUYsRUFBRSxzREFBa0I7QUFDdkgsbUNBQW1DLHdEQUFxQixPQUFPLDREQUF5QjtBQUN4RixtQ0FBbUMsaURBQXFCLFdBQVcsb0RBQXdCO0FBQzNGO0FBQ0EsU0FBUyx1QkFBdUIsa0RBQWMsc0JBQXNCLG1EQUFlO0FBQ25GO0FBQ0E7QUFDQSwrREFBK0QsY0FBYztBQUM3RTtBQUNBO0FBQ0EsU0FBUyxHQUFHLGlEQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSyxPQUFPLHNEQUFrQjtBQUM5Qiw4Q0FBOEMsOENBQVU7QUFDeEQsZ0JBQWdCLGdCQUFnQixTQUFTLDZEQUFPO0FBQ2hELCtCQUErQixtRUFBUztBQUN4QywyQkFBMkIsZ0VBQVc7QUFDdEMsMkJBQTJCLHNFQUFpQixJQUFJLFFBQVEsR0FBRyxJQUFJO0FBQy9EO0FBQ0E7QUFD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aURBQVUsc0NBQXNDLGtEQUFjLG9DQUFvQyxJQUFJLGdEQUFZO0FBQ3pKO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiO0FBQ0EsU0FBUyxPQUFPLDhDQUFVLDZDQUE2Qyw4Q0FBVSxRQUFRLG1EQUFlLDRCQUE0Qix1REFBbUIseUJBQXlCLHNEQUFrQixzQkFBc0Isc0RBQWtCO0FBQzFPO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0MsK0VBQWE7QUFDL0M7QUFDQSxXQUFXLDZFQUFrQixPQUFPLGtEQUFjO0FBQ2xEO0FBQ0EsU0FBUyxTQUFTLGtEQUFjO0FBQ2hDO0FBQ0Esc0NBQXNDLGtEQUFjLENBQUMsb0ZBQXFCOztBQUVXIiwic291cmNlcyI6WyJEOlxcdGVtcFxcWW91VHViZVxcbm9kZV9tb2R1bGVzXFx1cGxvYWR0aGluZ1xcc2VydmVyXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yLCBnZW5lcmF0ZUtleSwgZ2VuZXJhdGVTaWduZWRVUkwsIHBhcnNlVGltZVRvU2Vjb25kcyB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuZXhwb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgbWFrZUFkYXB0ZXJIYW5kbGVyIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvaGFuZGxlci5qcyc7XG5leHBvcnQgeyBtYWtlQWRhcHRlckhhbmRsZXIgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC9oYW5kbGVyLmpzJztcbmltcG9ydCB7IGV4dHJhY3RSb3V0ZXJDb25maWcgYXMgZXh0cmFjdFJvdXRlckNvbmZpZyQxIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvcm91dGUtY29uZmlnLmpzJztcbmltcG9ydCB7IGNyZWF0ZUJ1aWxkZXIgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC91cGxvYWQtYnVpbGRlci5qcyc7XG5leHBvcnQgeyBjcmVhdGVCdWlsZGVyIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIuanMnO1xuZXhwb3J0IHsgVVRGaWxlcywgVVRSZWdpb24gYXMgZXhwZXJpbWVudGFsX1VUUmVnaW9uIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvdHlwZXMuanMnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cENsaWVudFJlcXVlc3QsIEh0dHBDbGllbnRSZXNwb25zZSB9IGZyb20gJ0BlZmZlY3QvcGxhdGZvcm0nO1xuaW1wb3J0ICogYXMgQXJyIGZyb20gJ2VmZmVjdC9BcnJheSc7XG5pbXBvcnQgKiBhcyBDYXVzZSBmcm9tICdlZmZlY3QvQ2F1c2UnO1xuaW1wb3J0ICogYXMgUmVkYWN0ZWQgZnJvbSAnZWZmZWN0L1JlZGFjdGVkJztcbmltcG9ydCAqIGFzIFMgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgeyBVVFRva2VuLCBJbmdlc3RVcmwsIEFwaVVybCwgVVBMT0FEVEhJTkdfVkVSU0lPTiwgVWZzSG9zdCB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2NvbmZpZy5qcyc7XG5pbXBvcnQgeyBsb2dIdHRwQ2xpZW50RXJyb3IsIGxvZ0h0dHBDbGllbnRSZXNwb25zZSB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBtYWtlUnVudGltZSB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3J1bnRpbWUuanMnO1xuaW1wb3J0IHsgbG9va3VwIH0gZnJvbSAnQHVwbG9hZHRoaW5nL21pbWUtdHlwZXMnO1xuaW1wb3J0ICogYXMgUHJlZGljYXRlIGZyb20gJ2VmZmVjdC9QcmVkaWNhdGUnO1xuaW1wb3J0IHsgdXBsb2FkV2l0aG91dFByb2dyZXNzIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci5qcyc7XG5cbi8qKlxuICogRXh0ZW5zaW9uIG9mIHRoZSBCbG9iIGNsYXNzIHRoYXQgc2ltcGxpZmllcyBzZXR0aW5nIHRoZSBgbmFtZWAgYW5kIGBjdXN0b21JZGAgcHJvcGVydGllcyxcbiAqIHNpbWlsYXIgdG8gdGhlIGJ1aWx0LWluIEZpbGUgY2xhc3MgZnJvbSBOb2RlID4gMjAuXG4gKi8gY2xhc3MgVVRGaWxlIGV4dGVuZHMgQmxvYiB7XG4gICAgY29uc3RydWN0b3IocGFydHMsIG5hbWUsIG9wdGlvbnMpe1xuICAgICAgICBjb25zdCBvcHRpb25zV2l0aERlZmF1bHRzID0ge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHR5cGU6IG9wdGlvbnM/LnR5cGUgPz8gKGxvb2t1cChuYW1lKSB8fCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKSxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogb3B0aW9ucz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgc3VwZXIocGFydHMsIG9wdGlvbnNXaXRoRGVmYXVsdHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmN1c3RvbUlkID0gb3B0aW9uc1dpdGhEZWZhdWx0cy5jdXN0b21JZDtcbiAgICAgICAgdGhpcy5sYXN0TW9kaWZpZWQgPSBvcHRpb25zV2l0aERlZmF1bHRzLmxhc3RNb2RpZmllZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGd1YXJkU2VydmVyT25seSgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgYHV0YXBpYCBjYW4gb25seSBiZSB1c2VkIG9uIHRoZSBzZXJ2ZXIuXCJcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY29uc3QgZG93bmxvYWRGaWxlID0gKF91cmwpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgbGV0IHVybCA9IFByZWRpY2F0ZS5pc1JlY29yZChfdXJsKSA/IF91cmwudXJsIDogX3VybDtcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIHNpbmNlIGRhdGF1cmxzIHdpbGwgcmVzdWx0IGluIG5hbWUgYmVpbmcgdG9vIGxvbmcsIHRlbGwgdGhlIHVzZXJcbiAgICAgICAgICAgIC8vIHRvIHVzZSB1cGxvYWRGaWxlcyBpbnN0ZWFkLlxuICAgICAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC5mYWlsKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlBsZWFzZSB1c2UgdXBsb2FkRmlsZXMoKSBmb3IgZGF0YSBVUkxzLiB1cGxvYWRGaWxlc0Zyb21VcmwoKSBpcyBpbnRlbmRlZCBmb3IgdXNlIHdpdGggcmVtb3RlIFVSTHMgb25seS5cIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXJsID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCB7IG5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpID8/IFwidW5rbm93bi1maWxlbmFtZVwiLCBjdXN0b21JZCA9IHVuZGVmaW5lZCB9ID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybCA6IHt9O1xuICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LmdldCh1cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QubW9kaWZ5KHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHt9XG4gICAgICAgIH0pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC5mbGF0TWFwKChfKT0+Xy5hcnJheUJ1ZmZlciksIEVmZmVjdC5tYXBFcnJvcigoY2F1c2UpPT57XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGRvd25sb2FkIHJlcXVlc3RlZCBmaWxlOiAke2NhdXNlLm1lc3NhZ2V9YCxcbiAgICAgICAgICAgICAgICBkYXRhOiBjYXVzZS50b0pTT04oKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksIEVmZmVjdC5zY29wZWQpO1xuICAgICAgICByZXR1cm4gbmV3IFVURmlsZShbXG4gICAgICAgICAgICBhcnJheUJ1ZmZlclxuICAgICAgICBdLCBuYW1lLCB7XG4gICAgICAgICAgICBjdXN0b21JZCxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImRvd25sb2FkRmlsZVwiKSk7XG5jb25zdCBnZW5lcmF0ZVByZXNpZ25lZFVybCA9IChmaWxlLCBjZCwgYWNsKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSB5aWVsZCogSW5nZXN0VXJsKHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCk7XG4gICAgICAgIGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtiYXNlVXJsfS8ke2tleX1gLCBhcGlLZXksIHtcbiAgICAgICAgICAgIC8vIHR0bEluU2Vjb25kczogcm91dGVPcHRpb25zLnByZXNpZ25lZFVSTFRUTCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1uYW1lXCI6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1zaXplXCI6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWNvbnRlbnQtZGlzcG9zaXRpb25cIjogY2QsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWFjbFwiOiBhY2xcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlUHJlc2lnbmVkVXJsXCIpKTtcbmNvbnN0IHVwbG9hZEZpbGUgPSAoZmlsZSwgb3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBwcmVzaWduZWQgPSB5aWVsZCogZ2VuZXJhdGVQcmVzaWduZWRVcmwoZmlsZSwgb3B0cy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIiwgb3B0cy5hY2wpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiVXBsb2FkVGhpbmdFcnJvclwiLCAoZSk9PkVmZmVjdC5mYWlsKFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QoZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKCk9PkVmZmVjdC5mYWlsKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkxcIlxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCogdXBsb2FkV2l0aG91dFByb2dyZXNzKGZpbGUsIHByZXNpZ25lZCkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoVXBsb2FkVGhpbmdFcnJvci50b09iamVjdChlKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJSZXNwb25zZUVycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogZS50b0pTT04oKVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHVybDogcmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgYXBwVXJsOiByZXNwb25zZS5hcHBVcmwsXG4gICAgICAgICAgICB1ZnNVcmw6IHJlc3BvbnNlLnVmc1VybCxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgIGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkID8/IG51bGwsXG4gICAgICAgICAgICBmaWxlSGFzaDogcmVzcG9uc2UuZmlsZUhhc2hcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVcIikpO1xuXG5jbGFzcyBVVEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nID0gKHBhdGhuYW1lLCBib2R5LCByZXNwb25zZVNjaGVtYSk9PkVmZmVjdC5nZW4odGhpcywgZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVXJsID0geWllbGQqIEFwaVVybDtcbiAgICAgICAgICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHBhdGhuYW1lKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoYmFzZVVybCksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlVbnNhZmVKc29uKGJvZHkpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogXCJzZXJ2ZXItc2RrXCIsXG4gICAgICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSlcbiAgICAgICAgICAgICAgICB9KSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiVXBsb2FkVGhpbmcgQVBJIFJlc3BvbnNlXCIpLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZXF1ZXN0IFVwbG9hZFRoaW5nIEFQSVwiKVxuICAgICAgICAgICAgICAgIH0pLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24ocmVzcG9uc2VTY2hlbWEpKSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgICAgICB9KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTW9yZSBpbmZvIGNhbiBiZSBmb3VuZCBvbiB0aGlzIGVycm9yJ3MgYGNhdXNlYCBwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI3JlcXVlc3RVcGxvYWRUaGluZ1wiKSk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUFzeW5jID0gYXN5bmMgKHByb2dyYW0sIHNpZ25hbCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXQgPSBhd2FpdCBwcm9ncmFtLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI2V4ZWN1dGVBc3luY1wiKSwgKGUpPT50aGlzLnJ1bnRpbWUucnVuUHJvbWlzZUV4aXQoZSwgc2lnbmFsID8ge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWxcbiAgICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICBpZiAoZXhpdC5fdGFnID09PSBcIkZhaWx1cmVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IENhdXNlLnNxdWFzaChleGl0LmNhdXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleGl0LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICogUmVxdWVzdCB0byBkZWxldGUgZmlsZXMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCBkZWxldGVGaWxlcyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCBkZWxldGVGaWxlcyhcIm15Q3VzdG9tSWRlbnRpZmllclwiLCB7IGtleVR5cGU6IFwiY3VzdG9tSWRcIiB9KVxuICAgKi8gdGhpcy5kZWxldGVGaWxlcyA9IGFzeW5jIChrZXlzLCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuICAgICAgICAgICAgY2xhc3MgRGVsZXRlRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkRlbGV0ZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogUy5OdW1iZXJcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9kZWxldGVGaWxlc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIERlbGV0ZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJkZWxldGVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICogUmVxdWVzdCBmaWxlIFVSTHMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuICAgKiBjb25zb2xlLmxvZyhkYXRhKTsgLy8gW3trZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCJ9XVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG4gICAqIGNvbnNvbGUubG9nKGRhdGEpIC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiIH0se2tleTogXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8xNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wifV1cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgLSBTZWUgaHR0cHM6Ly9kb2NzLnVwbG9hZHRoaW5nLmNvbS93b3JraW5nLXdpdGgtZmlsZXMjYWNjZXNzaW5nLWZpbGVzIGZvciBpbmZvIGhvdyB0byBhY2Nlc3MgZmlsZXNcbiAgICovIHRoaXMuZ2V0RmlsZVVybHMgPSBhc3luYyAoa2V5cywgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcbiAgICAgICAgICAgIGNsYXNzIEdldEZpbGVVcmxSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRGaWxlVXJsUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGRhdGE6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZ2V0RmlsZVVybFwiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIEdldEZpbGVVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRGaWxlVXJsc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICogUmVxdWVzdCBmaWxlIGxpc3QgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0c1xuICAgKiBAcGFyYW0ge251bWJlcn0gb3B0cy5saW1pdCBUaGUgbWF4aW11bSBudW1iZXIgb2YgZmlsZXMgdG8gcmV0dXJuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLm9mZnNldCBUaGUgbnVtYmVyIG9mIGZpbGVzIHRvIHNraXBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGF0YSA9IGF3YWl0IGxpc3RGaWxlcyh7IGxpbWl0OiAxIH0pO1xuICAgKiBjb25zb2xlLmxvZyhkYXRhKTsgLy8geyBrZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCBpZDogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhcIiB9XG4gICAqLyB0aGlzLmxpc3RGaWxlcyA9IGFzeW5jIChvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjbGFzcyBMaXN0RmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkxpc3RGaWxlUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGhhc01vcmU6IFMuQm9vbGVhbixcbiAgICAgICAgICAgICAgICBmaWxlczogUy5BcnJheShTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogUy5TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFMuTGl0ZXJhbChcIkRlbGV0aW9uIFBlbmRpbmdcIiwgXCJGYWlsZWRcIiwgXCJVcGxvYWRlZFwiLCBcIlVwbG9hZGluZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRBdDogUy5OdW1iZXJcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9saXN0RmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgICAgIH0sIExpc3RGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwibGlzdEZpbGVzXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuYW1lRmlsZXMgPSBhc3luYyAodXBkYXRlcyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY2xhc3MgUmVuYW1lRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIlJlbmFtZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVuYW1lRmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXM6IEFyci5lbnN1cmUodXBkYXRlcylcbiAgICAgICAgICAgIH0sIFJlbmFtZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJyZW5hbWVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFVzYWdlSW5mbyA9IGFzeW5jICgpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNsYXNzIEdldFVzYWdlSW5mb1Jlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFVzYWdlSW5mb1Jlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBhcHBUb3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBmaWxlc1VwbG9hZGVkOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBsaW1pdEJ5dGVzOiBTLk51bWJlclxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldFVzYWdlSW5mb1wiLCB7fSwgR2V0VXNhZ2VJbmZvUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0VXNhZ2VJbmZvXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHByZXNpZ25lZCB1cmwgZm9yIGEgcHJpdmF0ZSBmaWxlXG4gICAqIFVubGlrZSB7QGxpbmsgZ2V0U2lnbmVkVVJMfSwgdGhpcyBtZXRob2QgZG9lcyBub3QgbWFrZSBhIGZldGNoIHJlcXVlc3QgdG8gdGhlIFVwbG9hZFRoaW5nIEFQSVxuICAgKiBhbmQgaXMgdGhlIHJlY29tbWVuZGVkIHdheSB0byBnZW5lcmF0ZSBhIHByZXNpZ25lZCB1cmwgZm9yIGEgcHJpdmF0ZSBmaWxlLlxuICAgKiovIHRoaXMuZ2VuZXJhdGVTaWduZWRVUkwgPSBhc3luYyAoa2V5LCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW4gPSBwYXJzZVRpbWVUb1NlY29uZHMob3B0cz8uZXhwaXJlc0luID8/IFwiNSBtaW51dGVzXCIpO1xuICAgICAgICAgICAgaWYgKG9wdHM/LmV4cGlyZXNJbiAmJiBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgYSB2YWxpZCB0aW1lIHN0cmluZywgZm9yIGV4YW1wbGUgJzFkJywgJzIgZGF5cycsIG9yIGEgbnVtYmVyIG9mIHNlY29uZHMuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFwaUtleSwgYXBwSWQgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc0hvc3QgPSB5aWVsZCogVWZzSG9zdDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm90byA9IHVmc0hvc3QuaW5jbHVkZXMoXCJsb2NhbFwiKSA/IFwiaHR0cFwiIDogXCJodHRwc1wiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc1VybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtwcm90b306Ly8ke2FwcElkfS4ke3Vmc0hvc3R9L2YvJHtrZXl9YCwgYXBpS2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIHR0bEluU2Vjb25kczogZXhwaXJlc0luXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdWZzVXJsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0ucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KSksIEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlU2lnbmVkVVJMXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgKiBSZXF1ZXN0IGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUocylcbiAgICogQHJlbWFya3MgVGhpcyBtZXRob2QgaXMgbm8gbG9uZ2VyIHJlY29tbWVuZGVkIGFzIGl0IG1ha2VzIGEgZmV0Y2hcbiAgICogcmVxdWVzdCB0byB0aGUgVXBsb2FkVGhpbmcgQVBJIHdoaWNoIGluY3VycyByZWR1bmRhbnQgbGF0ZW5jeS4gSXRcbiAgICogd2lsbCBiZSBkZXByZWNhdGVkIGluIFVwbG9hZFRoaW5nIHY4IGFuZCByZW1vdmVkIGluIFVwbG9hZFRoaW5nIHY5LlxuICAgKlxuICAgKiBAc2VlIHtAbGluayBnZW5lcmF0ZVNpZ25lZFVSTH0gZm9yIGEgbW9yZSBlZmZpY2llbnQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybFxuICAgKiovIHRoaXMuZ2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gb3B0cz8uZXhwaXJlc0luID8gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHMuZXhwaXJlc0luKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiAmJiBleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsYXNzIEdldFNpZ25lZFVybFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFNpZ25lZFVybFJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgIHVmc1VybDogUy5TdHJpbmdcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZXF1ZXN0RmlsZUFjY2Vzc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIGN1c3RvbUlkOiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9LCBHZXRTaWduZWRVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRTaWduZWRVUkxcIikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgQUNMIG9mIGEgZmlsZSBvciBzZXQgb2YgZmlsZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIE1ha2UgYSBzaW5nbGUgZmlsZSBwdWJsaWNcbiAgICogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCBcInB1YmxpYy1yZWFkXCIpO1xuICAgKlxuICAgKiAvLyBNYWtlIG11bHRpcGxlIGZpbGVzIHByaXZhdGVcbiAgICogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFxuICAgKiAgIFtcbiAgICogICAgIFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFxuICAgKiAgICAgXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLFxuICAgKiAgIF0sXG4gICAqICAgXCJwcml2YXRlXCIsXG4gICAqICk7XG4gICAqLyB0aGlzLnVwZGF0ZUFDTCA9IGFzeW5jIChrZXlzLCBhY2wsIG9wdHMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gQXJyLmVuc3VyZShrZXlzKS5tYXAoKGtleSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VTY2hlbWEgPSBTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni91cGRhdGVBQ0xcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0sIHJlc3BvbnNlU2NoZW1hKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwZGF0ZUFDTFwiKSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBBc3NlcnQgc29tZSBzdHVmZlxuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5mZXRjaCA9IHRoaXMub3B0cy5mZXRjaCA/PyBnbG9iYWxUaGlzLmZldGNoO1xuICAgICAgICB0aGlzLmRlZmF1bHRLZXlUeXBlID0gdGhpcy5vcHRzLmRlZmF1bHRLZXlUeXBlID8/IFwiZmlsZUtleVwiO1xuICAgICAgICB0aGlzLnJ1bnRpbWUgPSBtYWtlUnVudGltZSh0aGlzLmZldGNoLCB0aGlzLm9wdHMpO1xuICAgIH1cbiAgICB1cGxvYWRGaWxlcyhmaWxlcywgb3B0cykge1xuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgY29uc3QgY29uY3VycmVuY3kgPSBvcHRzPy5jb25jdXJyZW5jeSA/PyAxO1xuICAgICAgICBpZiAoY29uY3VycmVuY3kgPCAxIHx8IGNvbmN1cnJlbmN5ID4gMjUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJjb25jdXJyZW5jeSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDI1XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZm9yRWFjaChBcnIuZW5zdXJlKGZpbGVzKSwgKGZpbGUpPT51cGxvYWRGaWxlKGZpbGUsIG9wdHMgPz8ge30pLnBpcGUoRWZmZWN0Lm1hdGNoKHtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IChkYXRhKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IChlcnJvcik9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pKSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3lcbiAgICAgICAgfSkucGlwZShFZmZlY3QubWFwKCh1cHMpPT5BcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLCBvcHRzPy5zaWduYWwpO1xuICAgIH1cbiAgICB1cGxvYWRGaWxlc0Zyb21VcmwodXJscywgb3B0cykge1xuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgY29uc3QgY29uY3VycmVuY3kgPSBvcHRzPy5jb25jdXJyZW5jeSA/PyAxO1xuICAgICAgICBpZiAoY29uY3VycmVuY3kgPCAxIHx8IGNvbmN1cnJlbmN5ID4gMjUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJjb25jdXJyZW5jeSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDI1XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZm9yRWFjaChBcnIuZW5zdXJlKHVybHMpLCAodXJsKT0+ZG93bmxvYWRGaWxlKHVybCkucGlwZShFZmZlY3QuZmxhdE1hcCgoZmlsZSk9PnVwbG9hZEZpbGUoZmlsZSwgb3B0cyA/PyB7fSkpLCBFZmZlY3QubWF0Y2goe1xuICAgICAgICAgICAgICAgIG9uU3VjY2VzczogKGRhdGEpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG9uRmFpbHVyZTogKGVycm9yKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeVxuICAgICAgICB9KS5waXBlKEVmZmVjdC5tYXAoKHVwcyk9PkFycmF5LmlzQXJyYXkodXJscykgPyB1cHMgOiB1cHNbMF0pLCBFZmZlY3QudGFwKChyZXMpPT5FZmZlY3QubG9nRGVidWcoXCJGaW5pc2hlZCB1cGxvYWRpbmdcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwidXBsb2FkUmVzdWx0XCIsIHJlcykpKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNcIikpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNGcm9tVXJsXCIpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0sIG9wdHM/LnNpZ25hbCk7XG4gICAgfVxufVxuXG5jb25zdCBjcmVhdGVVcGxvYWR0aGluZyA9IChvcHRzKT0+Y3JlYXRlQnVpbGRlcihvcHRzKTtcbmNvbnN0IGNyZWF0ZVJvdXRlSGFuZGxlciA9IChvcHRzKT0+e1xuICAgIHJldHVybiBtYWtlQWRhcHRlckhhbmRsZXIoKGV2KT0+RWZmZWN0LnN1Y2NlZWQoe1xuICAgICAgICAgICAgcmVxOiBcInJlcXVlc3RcIiBpbiBldiA/IGV2LnJlcXVlc3QgOiBldlxuICAgICAgICB9KSwgKGV2KT0+RWZmZWN0LnN1Y2NlZWQoXCJyZXF1ZXN0XCIgaW4gZXYgPyBldi5yZXF1ZXN0IDogZXYpLCBvcHRzLCBcInNlcnZlclwiKTtcbn07XG5jb25zdCBleHRyYWN0Um91dGVyQ29uZmlnID0gKHJvdXRlcik9PkVmZmVjdC5ydW5TeW5jKGV4dHJhY3RSb3V0ZXJDb25maWckMShyb3V0ZXIpKTtcblxuZXhwb3J0IHsgVVRBcGksIFVURmlsZSwgY3JlYXRlUm91dGVIYW5kbGVyLCBjcmVhdGVVcGxvYWR0aGluZywgZXh0cmFjdFJvdXRlckNvbmZpZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;